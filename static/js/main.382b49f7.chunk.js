(this.webpackJsonpfluxlogic=this.webpackJsonpfluxlogic||[]).push([[0],{100:function(e,t,n){e.exports=n.p+"static/media/receiver.34ee3b2e.svg"},101:function(e,t,n){e.exports=n.p+"static/media/seven-segment.87ddfae3.svg"},102:function(e,t,n){e.exports=n.p+"static/media/sr-latch.66255362.svg"},103:function(e,t,n){e.exports=n.p+"static/media/d-latch.acbaf710.svg"},104:function(e,t,n){e.exports=n.p+"static/media/d-flip-flop.57c93f76.svg"},105:function(e,t,n){e.exports=n.p+"static/media/sr-d-flip-flop.2981b8c0.svg"},106:function(e,t,n){e.exports=n.p+"static/media/pin-inverted.25b87449.svg"},150:function(e,t,n){e.exports=n.p+"static/media/text.ede21a5e.svg"},151:function(e){e.exports=JSON.parse('{"name":"fluxlogic","homepage":"https://tcannon686.github.io/fluxlogic","version":"0.2.0","private":true,"dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","gh-pages":"^3.1.0","react":"^16.13.1","react-dom":"^16.13.1","react-markdown":"^5.0.3","react-scripts":"3.4.3","rxjs":"^7.2.0"},"scripts":{"predeploy":"yarn build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"standard"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"standard":"^14.3.4"}}')},153:function(e,t,n){e.exports=n.p+"static/media/open-pin.402b8aa6.svg"},154:function(e,t,n){e.exports=n.p+"static/media/open-pin-inverted.fb8a5ebb.svg"},155:function(e,t,n){e.exports=n.p+"static/media/pin.4c8eaca6.svg"},156:function(e,t,n){e.exports=n.p+"static/media/led-glow.ff1875d8.svg"},157:function(e,t,n){e.exports=n.p+"static/media/switch-on.37d11db0.svg"},158:function(e,t,n){e.exports=n.p+"static/media/seven-segment-0.04852a4c.svg"},159:function(e,t,n){e.exports=n.p+"static/media/seven-segment-1.6fd25c65.svg"},160:function(e,t,n){e.exports=n.p+"static/media/seven-segment-2.7208f433.svg"},161:function(e,t,n){e.exports=n.p+"static/media/seven-segment-3.8b8ca250.svg"},162:function(e,t,n){e.exports=n.p+"static/media/seven-segment-4.a18e6dce.svg"},163:function(e,t,n){e.exports=n.p+"static/media/seven-segment-5.25404539.svg"},164:function(e,t,n){e.exports=n.p+"static/media/seven-segment-6.f740952a.svg"},165:function(e,t,n){e.exports=n.p+"static/media/seven-segment-7.43f06495.svg"},166:function(e,t,n){e.exports=n.p+"static/media/seven-segment-8.4c14e783.svg"},167:function(e,t,n){e.exports=n.p+"static/media/seven-segment-9.50519141.svg"},168:function(e,t,n){e.exports=n.p+"static/media/seven-segment-10.b8869da5.svg"},169:function(e,t,n){e.exports=n.p+"static/media/seven-segment-11.4982a3e0.svg"},170:function(e,t,n){e.exports=n.p+"static/media/seven-segment-12.37b243f6.svg"},171:function(e,t,n){e.exports=n.p+"static/media/seven-segment-13.82ababea.svg"},172:function(e,t,n){e.exports=n.p+"static/media/seven-segment-14.a8711f2b.svg"},173:function(e,t,n){e.exports=n.p+"static/media/seven-segment-15.8f26ba8c.svg"},201:function(e,t,n){e.exports=n(285)},206:function(e,t,n){},285:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(14),c=n.n(r),u=(n(206),n(7)),o=n(16),l=n(113),s=n(11),f=n(343),p=n(346),m=n(344),d=n(340),g=n(288),b=n(355),v=n(347),O=n(356),h=n(115),j=n(357),E=n(183),x=n(341),y=n(351),C=n(345),k=n(350),S=n(342),w=n(179),M=n.n(w),N=n(180),P=n.n(N),D=n(111),I=n.n(D),B=n(178),F=n.n(B),G=n(177),R=n.n(G),A=n(181),L=n.n(A),U=n(176),W=n.n(U),X=n(175),T=n.n(X),Y=n(93),_=n.n(Y),H=n(330),J=n(83),z=n(286);var K=function(e){var t=Number(e.x0),n=Number(e.y0),a=Number(e.x1),r=Number(e.y1),c=Math.min(Math.abs(r-n),Math.abs(a-t)),u=.1+(a<t?.25*c:0),o=Math.min(t,a)-u,l=Math.min(n,r)-u,s=t-o+c,f=a-o-c,p=Math.abs(a-t)+2*u,m=Math.abs(r-n)+2*u,d="M ".concat(t-o," ").concat(n-l," ")+"C ".concat(s," ").concat(n-l,", ").concat(f," ").concat(r-l,", ").concat(a-o," ").concat(r-l);return i.a.createElement("svg",{width:"".concat(p,"in"),height:"".concat(m,"in"),viewBox:"0 0 ".concat(p," ").concat(m),style:{position:"absolute",left:"".concat(o,"in"),top:"".concat(l,"in"),pointerEvents:"none"}},i.a.createElement("path",{d:d,stroke:"black",strokeWidth:"0.01",fill:"transparent"}))},V=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){if(e){var t=e.subscribe((function(e){r(e)}));return function(){return t.unsubscribe()}}}),[e]),i},q=function(e){var t=Object(a.useRef)(null),n=Object(a.useCallback)((function(){return t.current.apply(t,arguments)}),[]);return Object(a.useEffect)((function(){t.current=e}),[e]),n};function Z(e){var t=e.theme,n=e.editable,r=e.circuit,c=e.page,u=Object(a.useMemo)((function(){return void 0!==c?r.gates.filter((function(e){return(e.page||0)===c})):r.gates}),[r,c]),o=e.selection,l=e.moveAmount,s=e.simulation,f=Object(a.useMemo)((function(){var e={};return u.forEach((function(n){var a=(n.x||0)+(o[n.id]?l[0]:0),i=(n.y||0)+(o[n.id]?l[1]:0);Object.assign(e,t.getPinPositions(n,a,i))})),e}),[o,t,l,u]),p=q(e.onGateClick),m=q(e.onGateMouseDown),d=q(e.onPinMouseUp),g=q(e.onPinMouseDown),b=q(e.onUserInputChanged);return i.a.createElement(i.a.Fragment,null,u.map((function(e){return e.inputs.filter((function(e){return e.connections.length>0})).map((function(e){return i.a.createElement(K,{key:"".concat(e.id,"-").concat(e.connections[0].id),x0:f[e.connections[0]].x,y0:f[e.connections[0]].y,x1:f[e.id].x,y1:f[e.id].y})}))})),u.map((function(a){var r=(a.x||0)+(e.selection[a.id]?l[0]:0),c=(a.y||0)+(e.selection[a.id]?l[1]:0),u=t.getGateComponent(a);return i.a.createElement(u,{simulation:s,gate:a,x:r,y:c,key:a.id,theme:t,selected:o[a.id],editable:n,onGateClick:p,onGateMouseDown:m,onPinMouseDown:g,onPinMouseUp:d,onUserInputChanged:b})})))}var $=n(57),Q=Object(H.a)((function(e){return{selectionBox:{position:"fixed",background:Object($.fade)(e.palette.primary.main,.3),pointerEvents:"none"}}}));var ee=function(e){var t=Object(a.useState)(e.selectionStart),n=Object(s.a)(t,2),r=n[0],c=n[1],u=e.selectionStart,o=e.onSelectionChanged,l=Q();return Object(a.useEffect)((function(){var e=function(e){var t=[e.clientX,e.clientY];c(t),o([Math.min(u[0],t[0]),Math.min(u[1],t[1])],[Math.max(u[0],t[0]),Math.max(u[1],t[1])])};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[u,o]),r[0]!==e.selectionStart[0]&&r[1]!==e.selectionStart[1]&&i.a.createElement("div",{className:l.selectionBox,style:{left:Math.min(e.selectionStart[0],r[0]),top:Math.min(e.selectionStart[1],r[1]),width:Math.abs(r[0]-e.selectionStart[0]),height:Math.abs(r[1]-e.selectionStart[1])}})},te=Object(H.a)((function(e){return{page:{width:"8.5in",height:"11in",position:"relative"}}}));function ne(e){var t=Object(a.useState)([e.x0,e.y0]),n=Object(s.a)(t,2),r=n[0],c=n[1],u=e.clientToPage;return Object(a.useEffect)((function(){var e=function(e){c(u([e.clientX,e.clientY]))};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[u]),e.isOutputPin?i.a.createElement(K,{x0:e.x0,y0:e.y0,x1:r[0],y1:r[1]}):i.a.createElement(K,{x1:e.x0,y1:e.y0,x0:r[0],y0:r[1]})}var ae=i.a.forwardRef((function(e,t){var n=e.selection,r=e.theme,c=e.simulation,l=e.editable,f=e.circuit,p=e.page,m=e.onCircuitChanged,d=e.onSelectionChanged,g=e.onUserInputChanged,b=te(),v=Object(a.useState)(null),O=Object(s.a)(v,2),h=O[0],j=O[1],E=Object(a.useState)({}),x=Object(s.a)(E,2),y=x[0],C=x[1],k=Object(a.useState)(!1),S=Object(s.a)(k,2),w=S[0],M=S[1],N=Object(a.useState)(!1),P=Object(s.a)(N,2),D=P[0],I=P[1],B=Object(a.useState)([0,0]),F=Object(s.a)(B,2),G=F[0],R=F[1],A=Object(a.useState)([0,0]),L=Object(s.a)(A,2),U=L[0],W=L[1],X=Object(a.useState)(null),T=Object(s.a)(X,2),Y=T[0],_=T[1],H=Object(a.useState)(!1),K=Object(s.a)(H,2),V=K[0],q=K[1],$=Object(a.useMemo)((function(){return void 0!==p?f.gates.filter((function(e){return(e.page||0)===p})):f.gates}),[f,p]),Q=w?[(U[0]-G[0])/96,(U[1]-G[1])/96]:[0,0],ae=function(e){var n=t.current.getBoundingClientRect();return[(e[0]-n.left)/96,(e[1]-n.top)/96]},ie=Object(a.useCallback)((function(e,t){if(l&&0===e.button&&!D){var a={};e.shiftKey&&Object.assign(a,n),a[t.id]=!a[t.id],d(a),e.stopPropagation()}}),[n,l,D,d]),re=Object(a.useCallback)((function(e,t){if(l&&0===e.button){var a=0===Object.keys(n).length;R([e.clientX,e.clientY]),W([e.clientX,e.clientY]),I(!1),a&&d(Object(J.a)({},t.id,!0)),(n[t.id]||a)&&M(!0),e.stopPropagation()}e.preventDefault()}),[l,n,R,W,I,d]),ce=Object(a.useCallback)((function(e){var t=Object(u.a)({},f);t.gates=t.gates.map((function(t){return n[t.id]&&((t=Object(u.a)({},t)).x+=e[0],t.y+=e[1]),t})),m(t)}),[f,n,m]),ue=Object(a.useCallback)((function(e,t){var n,a,i=Object(u.a)({},f),r=function(n,a){if(a||0===n.connections.length){if(n.id===e)return Object(u.a)({},n,{connections:[].concat(Object(o.a)(n.connections),[t])});if(n.id===t)return Object(u.a)({},n,{connections:[].concat(Object(o.a)(n.connections),[e])})}return n},c=!1;i.gates=i.gates.map((function(e){var t=!1,a=e.inputs.map((function(a){var i=r(a);return i!==a&&(n=e.id,t=!0),i}));return t?(c=!0,Object(u.a)({},e,{inputs:a})):e})),c&&(i.gates=i.gates.map((function(e){var t=!1,n=e.outputs.map((function(n){var i=r(n,!0);return i!==n&&(a=e.id,t=!0),i}));return t?Object(u.a)({},e,{outputs:n}):e})),n!==a&&m(i))}),[f,m]),oe=Object(a.useCallback)((function(e,t,n){if(l&&0===e.button)if(n)_(t.id),q(n);else if(t.connections.length>0){var a=Object(u.a)({},f);a.gates=a.gates.map((function(e){var n=e.inputs.indexOf(t),a=e.outputs.findIndex((function(e){return e.id===t.connections[0]}));if(-1!==n){var i=Object(u.a)({},e,{inputs:Object(o.a)(e.inputs)});return i.inputs[n]=Object(u.a)({},t,{connections:[]}),i}if(-1!==a){var r=e.outputs[a],c=Object(u.a)({},e,{outputs:Object(o.a)(e.outputs)});return c.outputs[a]=Object(u.a)({},r,{connections:r.connections.filter((function(e){return e!==t.id}))}),c}return e})),m(a),_(t.connections[0]),q(!0)}else _(t.id),q(n);e.stopPropagation(),e.preventDefault()}),[f,l,_,q,m]),le=Object(a.useCallback)((function(e,t,n){l&&(null!==Y&&Y!==t.id&&n^V&&(ue(Y,t.id),e.stopPropagation(),e.preventDefault()),_(null))}),[l,Y,V,ue]),se=Object(u.a)({},e.selection,{},y),fe=Object(a.useMemo)((function(){var e={};return f.gates.forEach((function(t){var a=(t.x||0)+(n[t.id]?Q[0]:0),i=(t.y||0)+(n[t.id]?Q[1]:0);Object.assign(e,r.getPinPositions(t,a,i))})),e}),[n,r,Q,f]);return Object(a.useEffect)((function(){var e=function(e){l?0===e.button&&(w?(ce(Q),M(!1),e.stopPropagation()):h&&(C({}),d(se)),j(null),null!==Y&&_(null),e.preventDefault()):e.preventDefault()};return window.addEventListener("mouseup",e),function(){return window.removeEventListener("mouseup",e)}})),Object(a.useEffect)((function(){if(l){var e=function(e){w&&W([e.clientX,e.clientY]),D||I(!0)};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}}),[w,D,l]),i.a.createElement(z.a,{elevation:3,square:!0,className:b.page,ref:t,onMouseDown:function(e){l&&0===e.button&&(j([e.clientX,e.clientY]),e.shiftKey||d({})),document.activeElement.blur(),e.preventDefault()}},l&&null!==Y&&i.a.createElement(ne,{x0:fe[Y].x,y0:fe[Y].y,clientToPage:ae,isOutputPin:V}),i.a.createElement(Z,{page:e.page,circuit:f,editable:l,selection:se,theme:r,moveAmount:Q,onPinMouseDown:oe,onPinMouseUp:le,onGateClick:ie,onGateMouseDown:re,onUserInputChanged:g,simulation:c}),l&&h&&i.a.createElement(ee,{selectionStart:h,onSelectionChanged:function(t,n){var a=ae(t),i=ae(n),r=null;$.forEach((function(t){var n=e.theme.getWidth(t),c=e.theme.getHeight(t),u=t.x>=a[0]&&t.y>=a[1]&&t.x+n<=i[0]&&t.y+c<=i[1];u&&!y[t.id]?(r||(r=Object.assign({},y)),r[t.id]=!0):!u&&y[t.id]&&(r||(r=Object.assign({},y)),delete r[t.id])})),r&&C(r)}}))})),ie=n(336),re=n(337),ce=n(287),ue=n(334),oe=n(333),le=n(335),se=n(149),fe=n.n(se);function pe(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),r=n[0],c=n[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{button:!0,onClick:function(){return c(!r)}},i.a.createElement(oe.a,null,r?i.a.createElement(fe.a,null):i.a.createElement(_.a,null)),i.a.createElement(ue.a,null,e.title)),i.a.createElement(le.a,{in:r},i.a.createElement(ce.a,null,e.children)))}var me=n(65),de=n.n(me),ge=n(66),be=n.n(ge),ve=n(94),Oe=n.n(ve),he=n(95),je=n.n(he),Ee=n(96),xe=n.n(Ee),ye=n(97),Ce=n.n(ye),ke=n(67),Se=n.n(ke),we=n(98),Me=n.n(we),Ne=n(99),Pe=n.n(Ne),De=n(100),Ie=n.n(De),Be=n(68),Fe=n.n(Be),Ge=n(69),Re=n.n(Ge),Ae=n(101),Le=n.n(Ae),Ue=n(102),We=n.n(Ue),Xe=n(103),Te=n.n(Xe),Ye=n(104),_e=n.n(Ye),He=n(105),Je=n.n(He),ze=n(150),Ke=n.n(ze),Ve=n(106),qe=n.n(Ve),Ze=n(114),$e=n(151),Qe=n(358),et=n(354),tt=n(359),nt=n(184);function at(e){return e!==Object(e)}function it(e,t){if(e===t)return!0;if(at(e)||at(t))return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!(n in t)||!it(e[n],t[n]))return!1;return!0}var rt={and:function(e,t){return[Ct(e,t).every((function(e){return e}))]},or:function(e,t){return[Ct(e,t).some((function(e){return e}))]},xor:function(e,t){return[Ct(e,t).filter((function(e){return e})).length%2!==0]},constant:function(e,t){return[e.value]},led:function(){return[]},text:function(){return[]},buffer:function(e,t){return Ct(e,t)},switch:function(e,t){return[Boolean(St(e,t))]},sender:function(){return[]},receiver:function(e,t,n){return Ct(function(e,t){return t.gates.find((function(t){return"sender"===t.type&&t.label===e.label}))}(e,n),t)},mux:function(e,t){var n=Ct(e,t),a=n.slice(0,e.n).reduce((function(e,t,n){return e+Number(t)*(1<<n)}),0);return[n[e.n+a]]},demux:function(e,t){var n=Ct(e,t),a=n.slice(0,e.n).reduce((function(e,t,n){return e+Number(t)*(1<<n)}),0),i=new Array(1<<e.n);return i.fill(!1),i[a]=n[e.n],i},sevenSegment:function(){return[]},srLatch:function(e,t){var n=Ct(e,t),a=kt(e,t),i=n[2],r=n[1],c=n[0],u=a[1];return r&&i&&!c?[!1,!0]:r&&!i&&c?[!0,!1]:[!u,u]},dLatch:function(e,t){var n=Ct(e,t),a=kt(e,t),i=n[1],r=n[0],c=a[1];return r?[!i,i]:[!c,c]},dFlipFlop:function(e,t){var n=Ct(e,t),a=kt(e,t),i=t.prevState&&Ct(e,t.prevState)[0],r=n[0],c=n[1],u=a[1];return i!==r&&!0===r?[!c,c]:[!u,u]},srDFlipFlop:function(e,t){var n=Ct(e,t),a=kt(e,t),i=n[0],r=t.prevState&&Ct(e,t.prevState)[1],c=n[1],u=n[2],o=n[3],l=a[1];return o&&!i?[!1,!0]:!o&&i?[!0,!1]:o&&i?[!0,!0]:r!==c&&!0===c?[!u,u]:[!l,l]}};function ct(){return{id:Mt(),connections:[]}}function ut(){return{id:Mt(),type:"and",inputs:[ct(),ct()],outputs:Object.seal([ct()])}}function ot(){return{id:Mt(),type:"or",inputs:[ct(),ct()],outputs:Object.seal([ct()])}}function lt(){return{id:Mt(),type:"xor",inputs:[ct(),ct()],outputs:Object.seal([ct()])}}function st(e){return{id:Mt(),type:"constant",inputs:Object.seal([]),outputs:Object.seal([ct()]),value:e||!1}}function ft(){return{id:Mt(),type:"switch",inputs:Object.seal([]),outputs:Object.seal([ct()])}}function pt(){return{id:Mt(),type:"buffer",inputs:Object.seal([ct()]),outputs:Object.seal([ct()])}}function mt(e){return{id:Mt(),type:"sender",label:e||"A",inputs:Object.seal([ct()]),outputs:Object.seal([])}}function dt(e){return{id:Mt(),type:"receiver",label:e||"A",inputs:Object.seal([]),outputs:Object.seal([ct()])}}function gt(e){for(var t=[],n=0;n<e;n++)t.push(ct());for(var a=0;a<1<<e;a++)t.push(ct());return{id:Mt(),type:"mux",n:e,inputs:Object.seal(t),outputs:Object.seal([ct()])}}function bt(e){for(var t=[ct()],n=[],a=0;a<e;a++)t.push(ct());for(var i=0;i<1<<e;i++)n.push(ct());return{id:Mt(),type:"demux",n:e,inputs:Object.seal(t),outputs:Object.seal(n)}}function vt(e){return{id:Mt(),type:"sevenSegment",inputs:Object.seal([ct(),ct(),ct(),ct()]),outputs:Object.seal([])}}function Ot(){return{id:Mt(),type:"srLatch",inputs:Object.seal([ct(),ct(),ct()]),outputs:Object.seal([ct(),ct()])}}function ht(){return{id:Mt(),type:"dLatch",inputs:Object.seal([ct(),ct()]),outputs:Object.seal([ct(),ct()])}}function jt(){return{id:Mt(),type:"dFlipFlop",inputs:Object.seal([ct(),ct()]),outputs:Object.seal([ct(),ct()])}}function Et(){return{id:Mt(),type:"srDFlipFlop",inputs:Object.seal([ct(),ct(),ct(),ct()]),outputs:Object.seal([ct(),ct()])}}function xt(e,t){var n={outputs:{},inputs:{}};if(t&&(n.prevState=Object(u.a)({},t),delete n.prevState.prevState),t){var a,i=Object(Ze.a)(e.gates);try{for(i.s();!(a=i.n()).done;)for(var r=a.value,c=rt[r.type](r,t,e),o=0;o<c.length;o++)n.outputs[r.outputs[o].id]=1===(c[o]^r.outputs[o].isInverted)}catch(g){i.e(g)}finally{i.f()}Object.assign(n.inputs,t.inputs)}else{var l,s=Object(Ze.a)(e.gates);try{for(s.s();!(l=s.n()).done;){var f,p=l.value,m=Object(Ze.a)(p.outputs);try{for(m.s();!(f=m.n()).done;){var d=f.value;n.outputs[d.id]=!1}}catch(g){m.e(g)}finally{m.f()}}}catch(g){s.e(g)}finally{s.f()}}return n}function yt(e){return!e||!it(e.prevState,Object(l.a)(e,["prevState"]))}function Ct(e,t){return e.inputs.map((function(e){return 1===(t.outputs[e.connections[0]]^e.isInverted)}))}function kt(e,t){return e.outputs.map((function(e){return t.outputs[e.id]}))}function St(e,t){return t.inputs[e.id]}var wt=0;function Mt(){return wt>=Number.MAX_SAFE_INTEGER&&(wt=0),wt++}function Nt(e){var t=Object(u.a)({},e),n=wt,a=function(e){return wt<Number.MAX_SAFE_INTEGER-e?e+wt:e-Number.MAX_SAFE_INTEGER+wt},i=function(e){var t=Object(u.a)({},e,{id:a(e.id)});return t.id>n&&(n=t.id),t.connections&&(t.connections=t.connections.map(a)),t};return t.gates=t.gates.map((function(e){var t=i(e);return t.inputs=t.inputs.map(i),t.outputs=t.outputs.map(i),t})),wt=n+1,t}var Pt=function(e){var t=function(e){return Object.fromEntries(e.reduce((function(e,t){return e.concat(t.inputs.map((function(e){return e.id})),t.outputs.map((function(e){return e.id})))}),[]).map((function(e){return[e,!0]})))}(e);return e.map((function(e){var n=Object(u.a)({},e),a=function(e){return Object(u.a)({},e,{connections:e.connections.filter((function(e){return t[e]}))})};return n.inputs=n.inputs.map(a),n.outputs=n.outputs.map(a),n}))},Dt=function(e){return JSON.parse(e)};function It(e){return i.a.createElement(ie.a,{item:!0,xs:3},i.a.createElement(h.a,{title:"Add ".concat(e.text)},i.a.createElement(g.a,{onClick:e.onClick},i.a.createElement("div",{style:{position:"relative",width:"0.5in",height:"0.5in",overflow:"hidden"}},e.inverted&&i.a.createElement(K,{x0:.25,y0:.25,x1:.4375,y1:.25}),e.inverted&&i.a.createElement("img",{src:qe.a,alt:"",style:{position:"absolute",left:"".concat(.375,"in"),top:"".concat(.1875,"in")}}),i.a.createElement("img",{src:e.svg,alt:"",style:{position:"absolute",left:e.inverted?"-0.0625in":0,top:0}})))))}var Bt=i.a.memo((function(e){var t=function(e){return e.outputs[0].isInverted=!0,e};return i.a.createElement(re.a,null,i.a.createElement(pe,{title:"Basic Gates"},i.a.createElement(ie.a,{container:!0},i.a.createElement(It,{svg:de.a,text:"AND gate",onClick:function(){return e.onSelect(ut)}}),i.a.createElement(It,{svg:de.a,text:"NAND gate",onClick:function(){return e.onSelect((function(){return t(ut())}))},inverted:!0}),i.a.createElement(It,{svg:be.a,text:"OR gate",onClick:function(){return e.onSelect(ot)}}),i.a.createElement(It,{svg:be.a,text:"NOR gate",onClick:function(){return e.onSelect((function(){return t(ot())}))},inverted:!0}),i.a.createElement(It,{svg:Oe.a,text:"XOR gate",onClick:function(){return e.onSelect(lt)}}),i.a.createElement(It,{svg:xe.a,text:"ground",onClick:function(){return e.onSelect((function(){return st(!1)}))}}),i.a.createElement(It,{svg:je.a,text:"+1",onClick:function(){return e.onSelect((function(){return st(!0)}))}}),i.a.createElement(It,{svg:Se.a,text:"buffer",onClick:function(){return e.onSelect((function(){return pt()}))}}),i.a.createElement(It,{svg:Se.a,text:"inverter",onClick:function(){return e.onSelect((function(){return t(pt())}))},inverted:!0}))),i.a.createElement(pe,{title:"Input/Output"},i.a.createElement(ie.a,{container:!0},i.a.createElement(It,{svg:Ce.a,text:"LED",onClick:function(){return e.onSelect((function(){return{id:Mt(),type:"led",inputs:Object.seal([ct()]),outputs:Object.seal([])}}))}}),i.a.createElement(It,{svg:Le.a,text:"7-segment display",onClick:function(){return e.onSelect(vt)}}),i.a.createElement(It,{svg:Me.a,text:"switch",onClick:function(){return e.onSelect(ft)}}),i.a.createElement(It,{svg:Pe.a,text:"sender",onClick:function(){return e.onSelect(mt)}}),i.a.createElement(It,{svg:Ie.a,text:"receiver",onClick:function(){return e.onSelect(dt)}}))),i.a.createElement(pe,{title:"Mux/Demux"},i.a.createElement(ie.a,{container:!0},i.a.createElement(It,{svg:Fe.a,text:"2 to 1 mux",onClick:function(){return e.onSelect((function(){return gt(1)}))}}),i.a.createElement(It,{svg:Fe.a,text:"4 to 1 mux",onClick:function(){return e.onSelect((function(){return gt(2)}))}}),i.a.createElement(It,{svg:Re.a,text:"1 to 2 demux",onClick:function(){return e.onSelect((function(){return bt(1)}))}}),i.a.createElement(It,{svg:Re.a,text:"1 to 4 demux",onClick:function(){return e.onSelect((function(){return bt(2)}))}}))),i.a.createElement(pe,{title:"Flip-Flops and Latches"},i.a.createElement(ie.a,{container:!0},i.a.createElement(It,{svg:We.a,text:"gated SR-latch",onClick:function(){return e.onSelect(Ot)}}),i.a.createElement(It,{svg:Te.a,text:"D-latch",onClick:function(){return e.onSelect(ht)}}),i.a.createElement(It,{svg:_e.a,text:"D-flip-flop",onClick:function(){return e.onSelect(jt)}}),i.a.createElement(It,{svg:Je.a,text:"SR-D-flip-flop",onClick:function(){return e.onSelect(Et)}}))),i.a.createElement(pe,{title:"Other"},i.a.createElement(ie.a,{container:!0},i.a.createElement(It,{svg:Ke.a,text:"text",onClick:function(){return e.onSelect((function(){return e="Text",{id:Mt(),type:"text",inputs:Object.seal([]),outputs:Object.seal([]),text:e,width:2,height:.5};var e}))}}))))})),Ft=n(349),Gt=n(352),Rt=Object(H.a)((function(e){return{evenlySpaced:{"& > *":{margin:e.spacing(1)}}}}));function At(e){return i.a.createElement(ce.a,null,i.a.createElement(oe.a,null,i.a.createElement(b.a,{title:"Invert pin"},i.a.createElement(Gt.a,{checked:Boolean(e.pin.isInverted),onChange:function(t){var n=Object(u.a)({},e.pin);t.target.checked?n.isInverted=!0:delete n.isInverted,e.onChange(n)}}))),i.a.createElement(ue.a,null," ",e.label||"Pin ".concat(e.index+1)," "),e.deletable&&i.a.createElement(g.a,{onClick:e.onPinDeleted},i.a.createElement(I.a,null)))}function Lt(e){var t=e.circuit,n=e.selection,r=Rt(),c=Object(a.useMemo)((function(){return t.gates.filter((function(e){return n[e.id]}))}),[t,n]),l=Object(a.useMemo)((function(){return c.reduce((function(e,t){return Math.min(e,t.x)}),1/0)}),[c]),f=Object(a.useMemo)((function(){return c.reduce((function(e,t){return Math.min(e,t.y)}),1/0)}),[c]),p=Object(a.useMemo)((function(){return c.reduce((function(e,t){return void 0===e?t.label||"":t.label===e&&void 0!==t.label?e:""}),void 0)||""}),[c]),m=Object(a.useMemo)((function(){return c.every((function(e){return void 0!==e.label}))}),[c]),b=Object(a.useState)(0),v=Object(s.a)(b,2),O=v[0],j=v[1],E=Object(a.useState)(0),x=Object(s.a)(E,2),y=x[0],C=x[1],S=Object(a.useState)(""),w=Object(s.a)(S,2),M=w[0],N=w[1];Object(a.useEffect)((function(){j(l),C(f)}),[l,f]),Object(a.useEffect)((function(){N(p)}),[p]);var P=function(a){var i=Object(u.a)({},t);i.gates=t.gates.map((function(e){return n[e.id]?a(e):e})),e.onCircuitChanged(i)},D=function(n,a,i){var r=Object(u.a)({},t);r.gates=Object(o.a)(t.gates);var c=Object(u.a)({},B);r.gates[r.gates.indexOf(B)]=c,i?(c.outputs=Object(o.a)(c.outputs),c.outputs[n]=a):(c.inputs=Object(o.a)(c.inputs),c.inputs[n]=a),e.onCircuitChanged(r)},I=function(n,a){var i=Object(u.a)({},t);i.gates=Object(o.a)(t.gates);var r=Object(u.a)({},B);i.gates[i.gates.indexOf(B)]=r,a?r.outputs=r.outputs.filter((function(e,t){return t!==n})):r.inputs=r.inputs.filter((function(e,t){return t!==n})),i.gates=Pt(i.gates),e.onCircuitChanged(i)},B=c[0],F=Object(a.useState)(""),G=Object(s.a)(F,2),R=G[0],A=G[1],L=Object(a.useState)(0),U=Object(s.a)(L,2),W=U[0],X=U[1],T=Object(a.useState)(0),Y=Object(s.a)(T,2),_=Y[0],H=Y[1];if(Object(a.useEffect)((function(){B&&(A(B.text||""),X(B.width||0),H(B.height||0))}),[B]),0===c.length)return i.a.createElement(k.a,{p:3},i.a.createElement(h.a,{variant:"body1"},"Make a selection, then its properties will be available here."));var J="and"===B.type||"or"===B.type||"xor"===B.type,z=i.a.createElement(pe,{title:"Inputs"},i.a.createElement(re.a,null,B.inputs.map((function(e,t){return i.a.createElement(At,{key:t,index:t,pin:e,label:"mux"===B.type&&(t<B.n?"Select ".concat(t+1):"Data ".concat(t-B.n+1)),onChange:function(e){return D(t,e,!1)},onPinDeleted:function(){return I(t,!1)},deletable:B.inputs.length>2&&J})})),J&&B.inputs.length<4&&i.a.createElement(ce.a,null,i.a.createElement(g.a,{fullWidth:!0,onClick:function(){return function(n){var a=Object(u.a)({},t);a.gates=Object(o.a)(t.gates);var i=Object(u.a)({},B);a.gates[a.gates.indexOf(B)]=i,n?i.outputs=[].concat(Object(o.a)(i.outputs),[ct()]):i.inputs=[].concat(Object(o.a)(i.inputs),[ct()]),e.onCircuitChanged(a)}(!1)}},"Add Pin")))),K=i.a.createElement(pe,{title:"Outputs"},i.a.createElement(re.a,null,B.outputs.map((function(e,t){return i.a.createElement(At,{key:t,index:t,pin:e,onChange:function(e){return D(t,e,!0)},onPinDeleted:function(){return I(t,!0)}})})))),V=i.a.createElement(pe,{title:"Text"},i.a.createElement(Ft.a,{multiline:!0,fullWidth:!0,label:"Text",variant:"filled",value:R,onChange:function(e){return A(e.target.value)},onBlur:function(e){e.target.value.length>0&&P((function(t){return Object(u.a)({},t,{text:e.target.value})}))}})),q=i.a.createElement(pe,{title:"Size"},i.a.createElement(k.a,{class:r.evenlySpaced},i.a.createElement(Ft.a,{fullWidth:!0,label:"Width",variant:"filled",value:W,onChange:function(e){return X(e.target.value)},onBlur:function(e){isNaN(e.target.value)||P((function(t){return Object(u.a)({},t,{width:Number(e.target.value)})}))}}),i.a.createElement(Ft.a,{fullWidth:!0,label:"Height",variant:"filled",onChange:function(e){return H(e.target.value)},value:_,onBlur:function(e){isNaN(e.target.value)||P((function(t){return Object(u.a)({},t,{height:Number(e.target.value)})}))}}))),Z=i.a.createElement(i.a.Fragment,null,B.inputs.length>0&&z,B.outputs.length>0&&K,void 0!==B.width&&void 0!==B.height&&q,void 0!==B.text&&V),$=i.a.createElement(pe,{title:"Position"},i.a.createElement(k.a,{class:r.evenlySpaced},i.a.createElement(Ft.a,{fullWidth:!0,label:"X",variant:"filled",value:O,onChange:function(e){return j(e.target.value)},onBlur:function(e){isNaN(e.target.value)||P((function(t){return Object(u.a)({},t,{x:Number(e.target.value)-l+t.x})}))}}),i.a.createElement(Ft.a,{fullWidth:!0,label:"Y",variant:"filled",onChange:function(e){return C(e.target.value)},value:y,onBlur:function(e){isNaN(e.target.value)||P((function(t){return Object(u.a)({},t,{y:Number(e.target.value)-f+t.y})}))}}),c.length>1&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{fullWidth:!0},i.a.createElement(g.a,{onClick:function(){var a=Object(u.a)({},t);a.gates=t.gates.map((function(e){return n[e.id]?Object(u.a)({},e,{x:l}):e})),e.onCircuitChanged(a)}},"Align X"),i.a.createElement(g.a,{onClick:function(){var a=Object(u.a)({},t);a.gates=t.gates.map((function(e){return n[e.id]?Object(u.a)({},e,{y:f}):e})),e.onCircuitChanged(a)}},"Align Y")),i.a.createElement(d.a,{fullWidth:!0},i.a.createElement(g.a,{onClick:function(){var a=Object(u.a)({},t),i=Object(o.a)(c).sort((function(e,t){return e.x-t.x}));a.gates=t.gates.map((function(e){return n[e.id]?Object(u.a)({},e,{x:.75*i.indexOf(e)+l}):e})),e.onCircuitChanged(a)}},"Distribute X"),i.a.createElement(g.a,{onClick:function(){var a=Object(u.a)({},t),i=Object(o.a)(c).sort((function(e,t){return e.y-t.y}));a.gates=t.gates.map((function(e){return n[e.id]?Object(u.a)({},e,{y:.5*i.indexOf(e)+f}):e})),e.onCircuitChanged(a)}},"Distribute Y"))))),Q=i.a.createElement(i.a.Fragment,null,i.a.createElement(pe,{title:"Label"},i.a.createElement(Ft.a,{fullWidth:!0,label:"Label",variant:"filled",value:M,onChange:function(e){return N(e.target.value)},onBlur:function(e){e.target.value.length>0&&P((function(t){return Object(u.a)({},t,{label:e.target.value})}))}})));return i.a.createElement("form",{noValidate:!0},i.a.createElement(re.a,null,$,m&&Q,1===c.length&&Z))}var Ut=n(153),Wt=n.n(Ut),Xt=n(154),Tt=n.n(Xt),Yt=n(155),_t=n.n(Yt),Ht=n(156),Jt=n.n(Ht),zt=n(157),Kt=n.n(zt),Vt=n(158),qt=n.n(Vt),Zt=n(159),$t=n.n(Zt),Qt=n(160),en=n.n(Qt),tn=n(161),nn=n.n(tn),an=n(162),rn=n.n(an),cn=n(163),un=n.n(cn),on=n(164),ln=n.n(on),sn=n(165),fn=n.n(sn),pn=n(166),mn=n.n(pn),dn=n(167),gn=n.n(dn),bn=n(168),vn=n.n(bn),On=n(169),hn=n.n(On),jn=n(170),En=n.n(jn),xn=n(171),yn=n.n(xn),Cn=n(172),kn=n.n(Cn),Sn=n(173),wn=n.n(Sn),Mn=n(174),Nn=n.n(Mn),Pn=Object(H.a)((function(e){return{selectedGate:{position:"absolute",left:0,top:0,background:Object($.fade)(e.palette.primary.main,.3),borderRadius:"4px",cursor:"move"},gate:{position:"absolute",left:0,top:0},pin:{position:"absolute",left:0,top:0},editableGate:{position:"absolute",left:0,top:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object($.fade)(e.palette.primary.main,.15)}},editablePin:{position:"absolute",margin:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object($.fade)(e.palette.primary.main,.3)}},label:{position:"relative",transform:"translate(-50%, -50%)",textAlign:"center",width:"1in",top:"-.1in",pointerEvents:"none"}}})),Dn=function(e){var t=e.theme,n=Pn(),a=e.x,r=e.y,c=t.getWidth(e.gate),u=t.getHeight(e.gate),o=t.getPinPositions(e.gate,a,r),l=e.selected,s=function(c){return i.a.createElement("img",{alt:"",src:t.getPinSvg(c.pin),onMouseDown:function(t){return e.onPinMouseDown(t,c.pin,c.isOutput)},onMouseUp:function(t){return e.onPinMouseUp(t,c.pin,c.isOutput)},style:{left:"".concat(o[c.pin.id].x-a-.0625,"in"),top:"".concat(o[c.pin.id].y-r-.0625,"in")},className:e.editable?n.editablePin:n.pin})};return i.a.createElement("div",{style:{left:"".concat(a,"in"),top:"".concat(r,"in"),width:"".concat(c,"in"),height:"".concat(u,"in")},className:e.editable?l?n.selectedGate:n.editableGate:n.gate},e.gate.outputs.map((function(e){return i.a.createElement(K,{key:"".concat(e.id,"-"),x0:o[e.id].x-a,y0:o[e.id].y-r,x1:(o[e.id].x1||o[e.id].x-.25)-a,y1:(o[e.id].y1||o[e.id].y)-r})})),e.gate.inputs.map((function(e){return i.a.createElement(K,{key:"".concat(e.id,"-"),x0:o[e.id].x-a,y0:o[e.id].y-r,x1:(o[e.id].x1||o[e.id].x+.25)-a,y1:(o[e.id].y1||o[e.id].y)-r})})),e.children,e.gate.label&&i.a.createElement("p",{className:n.label,style:{left:"".concat(t.getWidth(e.gate)/2,"in")}},e.gate.label),e.gate.inputs.map((function(e){return i.a.createElement(s,{pin:e,isOutput:!1,key:e.id})})),e.gate.outputs.map((function(e){return i.a.createElement(s,{pin:e,isOutput:!0,key:e.id})})))},In=i.a.memo((function(e){return i.a.createElement(Dn,e,i.a.createElement("img",{alt:e.gate.type,src:e.svg,style:{position:"absolute"},onClick:function(t){return e.onGateClick(t,e.gate)},onMouseDown:function(t){return e.onGateMouseDown(t,e.gate)}}))})),Bn=i.a.memo((function(e){return i.a.createElement(Dn,e,i.a.createElement("div",{onClick:function(t){return e.onGateClick(t,e.gate)},onMouseDown:function(t){return e.onGateMouseDown(t,e.gate)},style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"}},i.a.createElement(Nn.a,null,e.gate.text)))})),Fn=[qt.a,$t.a,en.a,nn.a,rn.a,un.a,ln.a,fn.a,mn.a,gn.a,vn.a,hn.a,En.a,yn.a,kn.a,wn.a];function Gn(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),r=n[0],c=n[1],u=e.gate,o=e.simulation,l=new Qe.a(r);return Object(a.useEffect)((function(){if(o){o.setUserInput(u,l);var e=l.subscribe((function(e){c(e)}));return function(){return e.unsubscribe()}}c(!1)}),[l,o,u]),i.a.createElement(In,Object.assign({svg:r?Kt.a:Me.a},e,{onGateClick:function(){o&&l.next(!r)}}))}function Rn(e){var t=e.gate,n=e.simulation,a=V(n&&n.getInputs(t).pipe(Object(nt.a)((function(e){return e[0]}))));return i.a.createElement(In,Object.assign({svg:a&&n?Jt.a:Ce.a},e))}function An(e){var t=e.gate,n=e.simulation,a=V(n&&n.getInputs(t).pipe(Object(nt.a)((function(e){return e.reduce((function(e,t,n){return e+Number(t)*(1<<n)}))}))));return i.a.createElement(In,Object.assign({svg:n?Fn[a]:Le.a},e))}var Ln={and:function(e){return i.a.createElement(In,Object.assign({},e,{svg:de.a}))},or:function(e){return i.a.createElement(In,Object.assign({svg:be.a},e))},xor:function(e){return i.a.createElement(In,Object.assign({svg:Oe.a},e))},buffer:function(e){return i.a.createElement(In,Object.assign({svg:Se.a},e))},led:function(e){return i.a.createElement(Rn,e)},constant:function(e){return i.a.createElement(In,Object.assign({svg:e.gate.value?je.a:xe.a},e))},switch:function(e){return i.a.createElement(Gn,e)},sender:function(e){return i.a.createElement(In,Object.assign({svg:Pe.a},e))},receiver:function(e){return i.a.createElement(In,Object.assign({svg:Ie.a},e))},mux:function(e){return i.a.createElement(In,Object.assign({svg:Fe.a},e))},demux:function(e){return i.a.createElement(In,Object.assign({svg:Re.a},e))},sevenSegment:function(e){return i.a.createElement(An,e)},srLatch:function(e){return i.a.createElement(In,Object.assign({svg:We.a},e))},dLatch:function(e){return i.a.createElement(In,Object.assign({svg:Te.a},e))},dFlipFlop:function(e){return i.a.createElement(In,Object.assign({svg:_e.a},e))},srDFlipFlop:function(e){return i.a.createElement(In,Object.assign({svg:Je.a},e))},text:function(e){return i.a.createElement(Bn,e)}},Un={getPinSvg:function(e){return 0===e.connections.length?e.isInverted?Tt.a:Wt.a:e.isInverted?qe.a:_t.a},getGateComponent:function(e){return Ln[e.type]},getPinPositions:function(e,t,n,a){var i=function(e,t){return(e-(t-1)/2)/Math.max(t-1,1)};if("mux"===e.type||"demux"===e.type){var r={};return e.inputs.forEach((function(a,c){if(c<e.n){var u=t+.25-.075*i(c,e.n);r[a.id]={x:u,y:n+.5,x1:u,y1:n+.25}}else r[a.id]={x:t,y:n+.25-.225*i(c-e.n,e.inputs.length-e.n)}})),e.outputs.forEach((function(a,c){r[a.id]={x:t+.5,y:n+.25-.225*i(c,e.outputs.length)}})),r}if("srDFlipFlop"===e.type){var c={},u=e.inputs[0],o=e.inputs[1],l=e.inputs[2],s=e.inputs[3],f=function(e,a){c[e.id]={x:t,y:n+.25-.225*i(a,2)}};return f(o,0),f(l,1),c[s.id]={x:t+.25,y:n-.05,x1:t+.25,y1:n},c[u.id]={x:t+.25,y:n+.55,x1:t+.25,y1:n},e.outputs.forEach((function(a,r){c[a.id]={x:t+.5,y:n+.25-.225*i(r,e.outputs.length)}})),c}var p={};return e.inputs.forEach((function(a,r){p[a.id]={x:t,y:n+.25-.225*i(r,e.inputs.length)}})),e.outputs.forEach((function(a,r){p[a.id]={x:t+.5,y:n+.25-.225*i(r,e.outputs.length)}})),p},getWidth:function(e,t){return e.width||.5},getHeight:function(e,t){return e.height||.5}},Wn=Object(H.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(2)},menuButtonGroup:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:320,flexShrink:0},drawerContent:{width:320,overflowX:"hidden"},content:{flexGrow:1,padding:e.spacing(3)},title:{flexGrow:1}}}));function Xn(e){for(var t=Object(a.useState)(null),n=Object(s.a)(t,2),r=n[0],c=n[1],u=Wn(),o=function(){return c(null)},l=[],f=function(t){l.push(i.a.createElement(x.a,{key:t,onClick:function(){e.onChangedPage(t),o()}},"Page ",t+1))},p=0;p<=e.pageCount;p++)f(p);return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{title:"Change page"},i.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true","aria-label":"change page",className:u.menuButton,color:"inherit",onClick:function(e){return c(e.currentTarget)}},"Page ",1+e.page,i.a.createElement(_.a,null))),i.a.createElement(E.a,{keepMounted:!0,open:Boolean(r),onClose:o,anchorEl:r},l))}function Tn(e){var t=e.children,n=e.value,a=e.index,r=Object(l.a)(e,["children","value","index"]);return i.a.createElement(S.a,{in:n===a},i.a.createElement("div",Object.assign({role:"tabpanel",id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),n===a&&i.a.createElement(k.a,null,t)))}var Yn=function(){var e=function(e,t){var n=Object(a.useState)(e),i=Object(s.a)(n,2),r=i[0],c=i[1],u=Object(a.useState)([]),l=Object(s.a)(u,2),f=l[0],p=l[1],m=Object(a.useState)([]),d=Object(s.a)(m,2),g=d[0],b=d[1],v=Object(a.useCallback)((function(){f.length>0&&(b([r].concat(Object(o.a)(g))),c(f[0]),p(f.slice(1)))}),[r,f,g,c,p,b]),O=Object(a.useCallback)((function(){g.length>0&&(p([r].concat(Object(o.a)(f))),c(g[0]),b(g.slice(1)))}),[r,f,g,c,p,b]),h=Object(a.useCallback)((function(e){p([r].concat(Object(o.a)(f)).splice(-(t||1e3))),c(e),b([])}),[r,f,c,p,b,t]);return[r,h,v,O]}((function(){return{gates:[]}})),t=Object(s.a)(e,4),n=t[0],r=t[1],c=t[2],l=t[3],k=Object(a.useState)(!1),S=Object(s.a)(k,2),w=S[0],N=S[1],D=Object(a.useState)(!1),B=Object(s.a)(D,2),G=B[0],A=B[1],U=Object(a.useState)(null),X=Object(s.a)(U,2),Y=X[0],_=X[1],H=Object(a.useState)(null),J=Object(s.a)(H,2),z=J[0],K=J[1],V=Object(a.useState)(0),q=Object(s.a)(V,2),Z=q[0],$=q[1],Q=Object(a.useState)(1),ee=Object(s.a)(Q,2),te=ee[0],ne=ee[1],ie=Object(a.useState)(0),re=Object(s.a)(ie,2),ce=re[0],ue=re[1],oe=Object(a.useState)(null),le=Object(s.a)(oe,2),se=le[0],fe=le[1],pe=Object(a.useState)(null),me=Object(s.a)(pe,2),de=me[0],ge=me[1],be=Object(a.useRef)(),ve=Object(a.useRef)(),Oe=Wn(),he=function(){return K(null)},je=function(){N(Object.fromEntries(n.gates.filter((function(e){return(e.page||0)===Z})).map((function(e){return[e.id,!0]})))),he()},Ee=function(){_(Pt(n.gates.filter((function(e){return w[e.id]})))),he()},xe=function(){if(Y){var e=Nt(n);e.gates=[].concat(Object(o.a)(e.gates),Object(o.a)(Y.map((function(e){return Object(u.a)({},e,{page:Z})})))),r(e)}he()},ye=Object(a.useCallback)((function(e){var t=Object(u.a)({},n);t.gates=Object(o.a)(t.gates);var a=e();t.gates.push(a);var i=be.current.getBoundingClientRect(),c=ve.current.getBoundingClientRect();a.x=((i.width+320)/2-c.left)/96,a.y=((window.innerHeight+i.height)/2-c.top)/96,a.page=Z,r(t)}),[be,ve,n,Z,r]),Ce=function(){if(G)fe(null),A(!1);else{var e=function(e){var t={};return e.forEach((function(e){"sender"===e.type&&(t[e.label]=(t[e.label]||0)+1)})),Object.entries(t).filter((function(e){return e[1]>1})).map((function(e){return e[0]})).sort()}(n.gates);0===e.length?(fe(function(e){var t=e.state,n=e.circuit,a=t,i=new Qe.a(a),r=new Map,c=new Map,u=new Map,o=new Map,l=new Map,s=function(e,t){return!!t&&t.outputs[e]};i.subscribe((function(e){r.forEach((function(t,n){s(n,e)!==s(n,e.prevState)&&t.next(s(n,e))}))}));var f=function(e){if(!o.has(e.id)){var t=new Qe.a;o.set(e.id,t),t.subscribe((function(t){a=xt(n,a),function(e,t,n){t.inputs[e.id]=n}(e,a,t),i.next(a)}))}return o.get(e.id)},p=function(e){return r.has(e)||r.set(e,new Qe.a(s(e,a))),r.get(e)};return{getOutputs:function(e){if(!c.has(e.id)){var t=e.inputs.map((function(e){return p(e.id)}));c.set(e.id,Object(et.a)(t))}return c.get(e.id)},getInputs:function(e){if(!u.has(e.id)){var t=e.inputs.map((function(e){return e.connections[0]?p(e.connections[0]):Object(tt.a)(!1)})).map((function(e){return e.pipe(Object(nt.a)((function(e){return 1===(e^ct.isInverted)})))}));u.set(e.id,Object(et.a)(t))}return u.get(e.id)},getState:function(){return i.asObservable()},nextState:function(){yt(a)&&(a=xt(n,a),i.next(a))},fastForward:function(e){for(var t=0;t<e&&yt(a);t++)a=xt(n,a),i.next(a)},setUserInput:function(e,t){l.has(e.id)&&l.get(e.id).unsubscribe(),l.set(e.id,t.subscribe((function(){var t;(t=f(e)).next.apply(t,arguments)})))},getUserInput:function(e,t){return f(e).asObservable()}}}({circuit:n})),A(!0)):ge("Uh oh! Multiple senders for labels: ".concat(e.join(", ")))}};Object(a.useEffect)((function(){if(G){var e=setInterval((function(){return se.fastForward(10)}),16);return function(){return clearInterval(e)}}}),[se,G]);var ke=function(){var e=Object(u.a)({},n);e.gates=e.gates.filter((function(e){return!w[e.id]})),e.gates=Pt(e.gates),r(e),N({})},Se=function(){Ee(),ke(),he()},we=function(e){e>=0&&($(e),e>=te&&ne(e+1))};return Object(a.useEffect)((function(){var e=function(e){if(e.target===document.body){var t=e.key.toUpperCase(),n=!0;e.getModifierState("Control")?"C"===t?Ee():"V"===t?xe():"X"===t?Se():"A"===t?je():"Z"===t?c():"Y"===t?l():n=!1:"Delete"===e.key?ke():"P"===t?Ce():isNaN(e.key)?"+"===e.key?we(Z+1):"-"===e.key?we(Z-1):n=!1:we(Number(e.key)-1),n&&e.preventDefault()}};return document.body.addEventListener("keydown",e),function(){return document.body.removeEventListener("keydown",e)}})),i.a.createElement("div",{className:Oe.root,onContextMenu:function(e){e.preventDefault(),K([e.clientX-2,e.clientY-4])}},i.a.createElement(f.a,null),i.a.createElement(O.a,{variant:"persistent",className:Oe.drawer,open:!0},i.a.createElement(m.a,null),i.a.createElement("div",{className:Oe.drawerContent},i.a.createElement(y.a,{onChange:function(e,t){return ue(t)},value:ce,variant:"fullWidth"},i.a.createElement(C.a,{label:"Palette"}),i.a.createElement(C.a,{label:"Properties"})),i.a.createElement(Tn,{value:ce,index:0},i.a.createElement(Bt,{onSelect:ye})),i.a.createElement(Tn,{value:ce,index:1},i.a.createElement(Lt,{circuit:n,selection:w,onCircuitChanged:function(e){return r(e)}})))),i.a.createElement(p.a,{position:"fixed",className:Oe.appBar,ref:be},i.a.createElement(m.a,null,i.a.createElement(h.a,{variant:"h6",className:Oe.title},"Flux Logic"),i.a.createElement(Xn,{page:Z,pageCount:te,onChangedPage:we}),i.a.createElement(d.a,{className:Oe.menuButtonGroup,color:"inherit"},i.a.createElement(b.a,{title:"Upload project"},i.a.createElement(g.a,{"aria-label":"upload",onClick:function(){return new Promise((function(e,t){var n=document.createElement("input");n.setAttribute("type","file"),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(){this.files[0].text().then((function(t){return e(t)})).catch((function(e){return t(e)}))}),!1),n.click(),document.body.removeChild(n)})).then(Dt).then((function(e){r(Nt(e.circuit));var t=e.circuit.gates.reduce((function(e,t){return t.page?Math.max(e,t.page):e}),0),n=e.currentPage||0;ne(Math.max(n,t+1)),$(n)})).catch((function(e){ge("Uh oh! We weren't able to load that file."),console.error(e)}))}},i.a.createElement(T.a,null))),i.a.createElement(b.a,{title:"Download project"},i.a.createElement(g.a,{"aria-label":"download",onClick:function(){!function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(t))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("circuit.json",function(e,t){return JSON.stringify({version:$e.version,circuit:e,currentPage:t})}(n,Z))}},i.a.createElement(W.a,null)))),i.a.createElement(d.a,{className:Oe.menuButtonGroup,color:"inherit"},i.a.createElement(b.a,{title:"Undo"},i.a.createElement(g.a,{"aria-label":"undo",onClick:c},i.a.createElement(R.a,null))),i.a.createElement(b.a,{title:"Redo"},i.a.createElement(g.a,{"aria-label":"redo",onClick:l},i.a.createElement(F.a,null)))),i.a.createElement(b.a,{title:G?"Stop simulation":"Start simulation"},i.a.createElement(g.a,{"aria-label":G?"stop":"start",onClick:Ce,className:Oe.menuButton,color:"inherit"},G?i.a.createElement(M.a,null):i.a.createElement(P.a,null))),i.a.createElement(b.a,{title:"Delete selection"},i.a.createElement(g.a,{"aria-label":"delete",onClick:ke,className:Oe.menuButton,color:"inherit"},i.a.createElement(I.a,null))),i.a.createElement(b.a,{title:"Help"},i.a.createElement(g.a,{"aria-label":"help",className:Oe.menuButton,color:"inherit",onClick:function(){window.open("https://github.com/tcannon686/fluxlogic#usage","_blank")}},i.a.createElement(L.a,null))))),i.a.createElement(m.a,null),i.a.createElement("main",{className:Oe.content},i.a.createElement(m.a,null),i.a.createElement(v.a,null,i.a.createElement(ae,{page:Z,circuit:n,theme:Un,ref:ve,selection:w,simulation:se,onSelectionChanged:function(e){N(e)},onCircuitChanged:function(e){r(e)},onUserInputChanged:function(e,t){se.setUserInput(e,t)},editable:!se}))),i.a.createElement(j.a,{open:null!==de,autoHideDuration:1e4,onClose:function(){ge(null)},message:de}),i.a.createElement(E.a,{keepMounted:!0,open:null!==z,onClose:he,anchorReference:"anchorPosition",anchorPosition:z&&{left:z[0],top:z[1]}},i.a.createElement(x.a,{onClick:Se},"Cut"),i.a.createElement(x.a,{onClick:Ee},"Copy"),i.a.createElement(x.a,{onClick:xe},"Paste"),i.a.createElement(x.a,{onClick:je},"Select all")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _n=n(182),Hn=n(348),Jn=Object(_n.a)({palette:{primary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"},secondary:{light:"#ffbd45",main:"#fb8c00",dark:"#c25e00",contrastText:"#fff"}}});c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),i.a.createElement(Hn.a,{theme:Jn},i.a.createElement(Yn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,t,n){e.exports=n.p+"static/media/and-gate.b39df76c.svg"},66:function(e,t,n){e.exports=n.p+"static/media/or-gate.ce29e395.svg"},67:function(e,t,n){e.exports=n.p+"static/media/buffer-gate.96d07f6a.svg"},68:function(e,t,n){e.exports=n.p+"static/media/mux.148e9d2c.svg"},69:function(e,t,n){e.exports=n.p+"static/media/demux.7b2120ef.svg"},94:function(e,t,n){e.exports=n.p+"static/media/xor-gate.12bb51fa.svg"},95:function(e,t,n){e.exports=n.p+"static/media/one-gate.ac34b99c.svg"},96:function(e,t,n){e.exports=n.p+"static/media/zero-gate.d126f49d.svg"},97:function(e,t,n){e.exports=n.p+"static/media/led.788936c7.svg"},98:function(e,t,n){e.exports=n.p+"static/media/switch-off.b1ab986c.svg"},99:function(e,t,n){e.exports=n.p+"static/media/sender.737fb0fa.svg"}},[[201,1,2]]]);
//# sourceMappingURL=main.382b49f7.chunk.js.map