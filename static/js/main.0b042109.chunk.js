(this.webpackJsonpfluxlogic=this.webpackJsonpfluxlogic||[]).push([[0],{121:function(e,t,n){e.exports=n(133)},126:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),c=n.n(i),o=(n(126),n(10)),u=n(14),l=n(107),s=n(11),f=n(89),p=n(191),d=n(194),m=n(192),b=n(195),g=n(135),v=n(203),h=n(196),O=n(204),j=n(77),E=n(205),x=n(106),y=n(189),C=n(200),k=n(193),S=n(199),w=n(190),M=n(102),N=n.n(M),P=n(103),G=n.n(P),D=n(74),I=n.n(D),B=n(101),R=n.n(B),A=n(100),U=n.n(A),L=n(104),X=n.n(L),W=n(99),Y=n.n(W),F=n(98),T=n.n(F),_=n(97),H=n.n(_),J=n(180),z=n(58),V=n(134),K=n(76),q={and:function(e,t){return[ee(e,t).every((function(e){return e}))]},or:function(e,t){return[ee(e,t).some((function(e){return e}))]},xor:function(e,t){return[ee(e,t).filter((function(e){return e})).length%2!==0]},constant:function(e,t){return[e.value]},led:function(){return[]},buffer:function(e,t){return ee(e,t)},switch:function(e,t){return[Boolean(te(e,t))]},sender:function(){return[]},receiver:function(e,t,n){return ee(Q(e,n),t)},mux:function(e,t){var n=ee(e,t),a=n.slice(0,e.n).reduce((function(e,t,n){return e+Number(t)*(1<<n)}),0);return[n[e.n+a]]},demux:function(e,t){var n=ee(e,t),a=n.slice(0,e.n).reduce((function(e,t,n){return e+Number(t)*(1<<n)}),0),r=new Array(1<<e.n);return r.fill(!1),r[a]=n[e.n],r}};function Z(){return{id:ae(),connections:[]}}function $(e,t){var n={outputs:{},inputs:{}};if(t){var a,r=Object(K.a)(e.gates);try{for(r.s();!(a=r.n()).done;)for(var i=a.value,c=q[i.type](i,t,e),o=0;o<c.length;o++)n.outputs[i.outputs[o].id]=1===(c[o]^i.outputs[o].isInverted)}catch(m){r.e(m)}finally{r.f()}Object.assign(n.inputs,t.inputs)}else{var u,l=Object(K.a)(e.gates);try{for(l.s();!(u=l.n()).done;){var s,f=u.value,p=Object(K.a)(f.outputs);try{for(p.s();!(s=p.n()).done;){var d=s.value;n.outputs[d.id]=!1}}catch(m){p.e(m)}finally{p.f()}}}catch(m){l.e(m)}finally{l.f()}}return n}function Q(e,t){return t.gates.find((function(t){return"sender"===t.type&&t.label===e.label}))}function ee(e,t){return e.inputs.map((function(e){return 1===(t.outputs[e.connections[0]]^e.isInverted)}))}function te(e,t){return t.inputs[e.id]}var ne=0;function ae(){return ne>=Number.MAX_SAFE_INTEGER&&(ne=0),ne++}var re=function(e){return Object.fromEntries(e.reduce((function(e,t){return e.concat(t.inputs.map((function(e){return e.id})),t.outputs.map((function(e){return e.id})))}),[]).map((function(e){return[e,!0]})))},ie={nextState:$,getOutputs:function(e,t){return e.outputs.map((function(e){return t.outputs[e.id]}))},getInputs:ee,getUserInput:te,setUserInput:function(e,t,n){t.inputs[e.id]=n},fastForward:function(e,t,n){for(var a=0;a<t;a++)n=$(e,n);return n},renumber:function(e){var t=Object(o.a)({},e),n=ne,a=function(e){return ne<Number.MAX_SAFE_INTEGER-e?e+ne:e-Number.MAX_SAFE_INTEGER+ne},r=function(e){var t=Object(o.a)({},e,{id:a(e.id)});return t.id>n&&(n=t.id),t.connections&&(t.connections=t.connections.map(a)),t};return t.gates=t.gates.map((function(e){var t=r(e);return t.inputs=t.inputs.map(r),t.outputs=t.outputs.map(r),t})),ne=n+1,t},connect:function(e,t){e.connections.push(t.id),t.connections.push(e.id)},circuit:function(e){return{gates:e}},andGate:function(){return{id:ae(),type:"and",inputs:[Z(),Z()],outputs:Object.seal([Z()])}},orGate:function(){return{id:ae(),type:"or",inputs:[Z(),Z()],outputs:Object.seal([Z()])}},xorGate:function(){return{id:ae(),type:"xor",inputs:[Z(),Z()],outputs:Object.seal([Z()])}},constantGate:function(e){return{id:ae(),type:"constant",inputs:Object.seal([]),outputs:Object.seal([Z()]),value:e||!1}},switchGate:function(){return{id:ae(),type:"switch",inputs:Object.seal([]),outputs:Object.seal([Z()])}},sender:function(e){return{id:ae(),type:"sender",label:e||"A",inputs:Object.seal([Z()]),outputs:Object.seal([])}},receiver:function(e){return{id:ae(),type:"receiver",label:e||"A",inputs:Object.seal([]),outputs:Object.seal([Z()])}},led:function(){return{id:ae(),type:"led",inputs:Object.seal([Z()]),outputs:Object.seal([])}},buffer:function(){return{id:ae(),type:"buffer",inputs:Object.seal([Z()]),outputs:Object.seal([Z()])}},pin:Z,mux:function(e){for(var t=[],n=0;n<e;n++)t.push(Z());for(var a=0;a<1<<e;a++)t.push(Z());return{id:ae(),type:"mux",n:e,inputs:Object.seal(t),outputs:Object.seal([Z()])}},demux:function(e){for(var t=[Z()],n=[],a=0;a<e;a++)t.push(Z());for(var r=0;r<1<<e;r++)n.push(Z());return{id:ae(),type:"demux",n:e,inputs:Object.seal(t),outputs:Object.seal(n)}},removeInvalidConnections:function(e){var t=re(e);return e.map((function(e){var n=Object(o.a)({},e),a=function(e){return Object(o.a)({},e,{connections:e.connections.filter((function(e){return t[e]}))})};return n.inputs=n.inputs.map(a),n.outputs=n.outputs.map(a),n}))},getValidPins:re,findSender:Q,getDuplicateSenderLabels:function(e){var t={};return e.forEach((function(e){"sender"===e.type&&(t[e.label]=(t[e.label]||0)+1)})),Object.entries(t).filter((function(e){return e[1]>1})).map((function(e){return e[0]})).sort()}};var ce=function(e){var t=Number(e.x0),n=Number(e.y0),a=Number(e.x1),i=Number(e.y1),c=Math.min(Math.abs(i-n),Math.abs(a-t)),o=.1+(a<t?.25*c:0),u=Math.min(t,a)-o,l=Math.min(n,i)-o,s=t-u+c,f=a-u-c,p=Math.abs(a-t)+2*o,d=Math.abs(i-n)+2*o,m="M ".concat(t-u," ").concat(n-l," ")+"C ".concat(s," ").concat(n-l,", ").concat(f," ").concat(i-l,", ").concat(a-u," ").concat(i-l);return r.a.createElement("svg",{width:"".concat(p,"in"),height:"".concat(d,"in"),viewBox:"0 0 ".concat(p," ").concat(d),style:{position:"absolute",left:"".concat(u,"in"),top:"".concat(l,"in"),pointerEvents:"none"}},r.a.createElement("path",{d:m,stroke:"black",strokeWidth:"0.01",fill:"transparent"}))},oe=function(e){var t=Object(a.useRef)(null),n=Object(a.useCallback)((function(){return t.current.apply(t,arguments)}),[]);return Object(a.useEffect)((function(){t.current=e}),[e]),n},ue=n(42),le=Object(J.a)((function(e){return{selectedGate:{position:"absolute",left:0,top:0,background:Object(ue.fade)(e.palette.primary.main,.3),borderRadius:"4px",cursor:"move"},gate:{position:"absolute",left:0,top:0},pin:{position:"absolute",left:0,top:0},editableGate:{position:"absolute",left:0,top:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object(ue.fade)(e.palette.primary.main,.15)}},editablePin:{position:"absolute",margin:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object(ue.fade)(e.palette.primary.main,.3)}},label:{position:"relative",transform:"translate(-50%, -50%)",textAlign:"center",width:"1in",top:"-.1in",pointerEvents:"none"}}})),se=r.a.memo((function(e){var t=e.theme,n=le(),a=e.x,i=e.y,c=t.getWidth(e.gate),o=t.getHeight(e.gate),u=t.getPinPositions(e.gate,a,i),l=e.selected,s=function(c){return r.a.createElement("img",{alt:"",src:t.getPinSvg(c.pin),onMouseDown:function(t){return e.onPinMouseDown(t,c.pin,c.isOutput)},onMouseUp:function(t){return e.onPinMouseUp(t,c.pin,c.isOutput)},style:{left:"".concat(u[c.pin.id].x-a-.0625,"in"),top:"".concat(u[c.pin.id].y-i-.0625,"in")},className:e.editable?n.editablePin:n.pin})};return r.a.createElement("div",{style:{left:"".concat(a,"in"),top:"".concat(i,"in"),width:"".concat(c,"in"),height:"".concat(o,"in")},className:e.editable?l?n.selectedGate:n.editableGate:n.gate},e.gate.outputs.map((function(e){return r.a.createElement(ce,{key:"".concat(e.id,"-"),x0:u[e.id].x-a,y0:u[e.id].y-i,x1:u[e.id].x-a-.25,y1:u[e.id].y-i})})),e.gate.inputs.map((function(e){return r.a.createElement(ce,{key:"".concat(e.id,"-"),x0:u[e.id].x-a,y0:u[e.id].y-i,x1:u[e.id].x-a+.25,y1:u[e.id].y-i})})),r.a.createElement("img",{alt:e.gate.type,src:e.svg,style:{position:"absolute"},onClick:function(t){return e.onGateClick(t,e.gate)},onMouseDown:function(t){return e.onGateMouseDown(t,e.gate)}}),e.gate.label&&r.a.createElement("p",{className:n.label,style:{left:"".concat(t.getWidth(e.gate)/2,"in")}},e.gate.label),e.gate.inputs.map((function(e){return r.a.createElement(s,{pin:e,isOutput:!1,key:e.id})})),e.gate.outputs.map((function(e){return r.a.createElement(s,{pin:e,isOutput:!0,key:e.id})})))}));function fe(e){var t=e.theme,n=e.editable,i=e.circuit,c=e.page,o=Object(a.useMemo)((function(){return void 0!==c?i.gates.filter((function(e){return(e.page||0)===c})):i.gates}),[i,c]),u=e.selection,l=e.moveAmount,s=e.simState,f=Object(a.useMemo)((function(){var e={};return o.forEach((function(n){var a=(n.x||0)+(u[n.id]?l[0]:0),r=(n.y||0)+(u[n.id]?l[1]:0);Object.assign(e,t.getPinPositions(n,a,r))})),e}),[u,t,l,o]),p=oe(e.onGateClick),d=oe(e.onGateMouseDown),m=oe(e.onPinMouseUp),b=oe(e.onPinMouseDown);return r.a.createElement(r.a.Fragment,null,o.map((function(e){return e.inputs.filter((function(e){return e.connections[0]})).map((function(e){return r.a.createElement(ce,{key:"".concat(e.id,"-").concat(e.connections[0].id),x0:f[e.connections[0]].x,y0:f[e.connections[0]].y,x1:f[e.id].x,y1:f[e.id].y})}))})),o.map((function(a){var i=(a.x||0)+(e.selection[a.id]?l[0]:0),c=(a.y||0)+(e.selection[a.id]?l[1]:0);return r.a.createElement(se,{gate:a,svg:t.getGateSvg(a,s),x:i,y:c,key:a.id,theme:t,selected:u[a.id],editable:n,onGateClick:p,onGateMouseDown:d,onPinMouseDown:b,onPinMouseUp:m})})))}var pe=Object(J.a)((function(e){return{selectionBox:{position:"fixed",background:Object(ue.fade)(e.palette.primary.main,.3),pointerEvents:"none"}}}));var de=function(e){var t=Object(a.useState)(e.selectionStart),n=Object(s.a)(t,2),i=n[0],c=n[1],o=e.selectionStart,u=e.onSelectionChanged,l=pe();return Object(a.useEffect)((function(){var e=function(e){var t=[e.clientX,e.clientY];c(t),u([Math.min(o[0],t[0]),Math.min(o[1],t[1])],[Math.max(o[0],t[0]),Math.max(o[1],t[1])])};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[o,u]),i[0]!==e.selectionStart[0]&&i[1]!==e.selectionStart[1]&&r.a.createElement("div",{className:l.selectionBox,style:{left:Math.min(e.selectionStart[0],i[0]),top:Math.min(e.selectionStart[1],i[1]),width:Math.abs(i[0]-e.selectionStart[0]),height:Math.abs(i[1]-e.selectionStart[1])}})},me=Object(J.a)((function(e){return{page:{width:"8.5in",height:"11in",position:"relative"}}}));function be(e){var t=Object(a.useState)([e.x0,e.y0]),n=Object(s.a)(t,2),i=n[0],c=n[1],o=e.clientToPage;return Object(a.useEffect)((function(){var e=function(e){c(o([e.clientX,e.clientY]))};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[o]),e.isOutputPin?r.a.createElement(ce,{x0:e.x0,y0:e.y0,x1:i[0],y1:i[1]}):r.a.createElement(ce,{x1:e.x0,y1:e.y0,x0:i[0],y0:i[1]})}var ge=r.a.forwardRef((function(e,t){var n=e.selection,i=e.theme,c=e.simState,l=e.editable,f=e.circuit,p=e.page,d=e.onCircuitChanged,m=e.onSelectionChanged,b=e.onUserInputChanged,g=me(),v=Object(a.useState)(null),h=Object(s.a)(v,2),O=h[0],j=h[1],E=Object(a.useState)({}),x=Object(s.a)(E,2),y=x[0],C=x[1],k=Object(a.useState)(!1),S=Object(s.a)(k,2),w=S[0],M=S[1],N=Object(a.useState)(!1),P=Object(s.a)(N,2),G=P[0],D=P[1],I=Object(a.useState)([0,0]),B=Object(s.a)(I,2),R=B[0],A=B[1],U=Object(a.useState)([0,0]),L=Object(s.a)(U,2),X=L[0],W=L[1],Y=Object(a.useState)(null),F=Object(s.a)(Y,2),T=F[0],_=F[1],H=Object(a.useState)(!1),J=Object(s.a)(H,2),K=J[0],q=J[1],Z=Object(a.useMemo)((function(){return void 0!==p?f.gates.filter((function(e){return(e.page||0)===p})):f.gates}),[f,p]),$=w?[(X[0]-R[0])/96,(X[1]-R[1])/96]:[0,0],Q=function(e){var n=t.current.getBoundingClientRect();return[(e[0]-n.left)/96,(e[1]-n.top)/96]},ee=Object(a.useCallback)((function(e,t){if(l&&0===e.button){if(!G){var a={};e.shiftKey&&Object.assign(a,n),a[t.id]=!a[t.id],m(a),e.stopPropagation()}}else null!=c&&"switch"===t.type&&b(t,!ie.getUserInput(t,c))}),[n,l,G,m,b,c]),te=Object(a.useCallback)((function(e,t){if(l&&0===e.button){var a=0===Object.keys(n).length;A([e.clientX,e.clientY]),W([e.clientX,e.clientY]),D(!1),a&&m(Object(z.a)({},t.id,!0)),(n[t.id]||a)&&M(!0),e.stopPropagation()}e.preventDefault()}),[l,n,A,W,D,m]),ne=Object(a.useCallback)((function(e){var t=Object(o.a)({},f);t.gates=t.gates.map((function(t){return n[t.id]&&((t=Object(o.a)({},t)).x+=e[0],t.y+=e[1]),t})),d(t)}),[f,n,d]),ae=Object(a.useCallback)((function(e,t){var n,a,r=Object(o.a)({},f),i=function(n,a){if(a||0===n.connections.length){if(n.id===e)return Object(o.a)({},n,{connections:[].concat(Object(u.a)(n.connections),[t])});if(n.id===t)return Object(o.a)({},n,{connections:[].concat(Object(u.a)(n.connections),[e])})}return n},c=!1;r.gates=r.gates.map((function(e){var t=!1,a=e.inputs.map((function(a){var r=i(a);return r!==a&&(n=e.id,t=!0),r}));return t?(c=!0,Object(o.a)({},e,{inputs:a})):e})),c&&(r.gates=r.gates.map((function(e){var t=!1,n=e.outputs.map((function(n){var r=i(n,!0);return r!==n&&(a=e.id,t=!0),r}));return t?Object(o.a)({},e,{outputs:n}):e})),n!==a&&d(r))}),[f,d]),re=Object(a.useCallback)((function(e,t,n){if(l&&0===e.button)if(n)_(t.id),q(n);else if(t.connections.length>0){var a=Object(o.a)({},f);a.gates=a.gates.map((function(e){var n=e.inputs.indexOf(t),a=e.outputs.findIndex((function(e){return e.id===t.connections[0]}));if(-1!==n){var r=Object(o.a)({},e,{inputs:Object(u.a)(e.inputs)});return r.inputs[n]=Object(o.a)({},t,{connections:[]}),r}if(-1!==a){var i=e.outputs[a],c=Object(o.a)({},e,{outputs:Object(u.a)(e.outputs)});return c.outputs[a]=Object(o.a)({},i,{connections:i.connections.filter((function(e){return e!==t.id}))}),c}return e})),d(a),_(t.connections[0]),q(!0)}else _(t.id),q(n);e.stopPropagation(),e.preventDefault()}),[f,l,_,q,d]),ce=Object(a.useCallback)((function(e,t,n){l&&(null!==T&&T!==t.id&&n^K&&(ae(T,t.id),e.stopPropagation(),e.preventDefault()),_(null))}),[l,T,K,ae]),oe=Object(o.a)({},e.selection,{},y),ue=Object(a.useMemo)((function(){var e={};return f.gates.forEach((function(t){var a=(t.x||0)+(n[t.id]?$[0]:0),r=(t.y||0)+(n[t.id]?$[1]:0);Object.assign(e,i.getPinPositions(t,a,r))})),e}),[n,i,$,f]);return Object(a.useEffect)((function(){var e=function(e){l?0===e.button&&(w?(ne($),M(!1),e.stopPropagation()):O&&(C({}),m(oe)),j(null),null!==T&&_(null),e.preventDefault()):e.preventDefault()};return window.addEventListener("mouseup",e),function(){return window.removeEventListener("mouseup",e)}})),Object(a.useEffect)((function(){if(l){var e=function(e){w&&W([e.clientX,e.clientY]),G||D(!0)};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}}),[w,G,l]),r.a.createElement(V.a,{elevation:3,square:!0,className:g.page,ref:t,onMouseDown:function(e){l&&0===e.button&&(j([e.clientX,e.clientY]),e.shiftKey||m({})),document.activeElement.blur(),e.preventDefault()}},l&&null!==T&&r.a.createElement(be,{x0:ue[T].x,y0:ue[T].y,clientToPage:Q,isOutputPin:K}),r.a.createElement(fe,{page:e.page,circuit:f,editable:l,selection:oe,theme:i,moveAmount:$,onPinMouseDown:re,onPinMouseUp:ce,onGateClick:ee,onGateMouseDown:te,simState:c}),l&&O&&r.a.createElement(de,{selectionStart:O,onSelectionChanged:function(t,n){var a=Q(t),r=Q(n),i=null;Z.forEach((function(t){var n=e.theme.getWidth(t),c=e.theme.getHeight(t),o=t.x>=a[0]&&t.y>=a[1]&&t.x+n<=r[0]&&t.y+c<=r[1];o&&!y[t.id]?(i||(i=Object.assign({},y)),i[t.id]=!0):!o&&y[t.id]&&(i||(i=Object.assign({},y)),delete i[t.id])})),i&&C(i)}}))})),ve=n(183),he=n(49),Oe=n.n(he),je=n(50),Ee=n.n(je),xe=n(66),ye=n.n(xe),Ce=n(67),ke=n.n(Ce),Se=n(68),we=n.n(Se),Me=n(51),Ne=n.n(Me),Pe=n(52),Ge=n.n(Pe),De=n(53),Ie=n.n(De),Be=n(69),Re=n.n(Be),Ae=n(70),Ue=n.n(Ae),Le=n(54),Xe=n.n(Le),We=n(55),Ye=n.n(We),Fe=n(71),Te=n.n(Fe);function _e(e){return r.a.createElement(ve.a,{item:!0,xs:3},r.a.createElement(j.a,{title:"Add ".concat(e.text)},r.a.createElement(g.a,{onClick:e.onClick},r.a.createElement("div",{style:{position:"relative",width:"0.5in",height:"0.5in",overflow:"hidden"}},e.inverted&&r.a.createElement(ce,{x0:.25,y0:.25,x1:.4375,y1:.25}),e.inverted&&r.a.createElement("img",{src:Te.a,alt:"",style:{position:"absolute",left:"".concat(.375,"in"),top:"".concat(.1875,"in")}}),r.a.createElement("img",{src:e.svg,alt:"",style:{position:"absolute",left:e.inverted?"-0.0625in":0,top:0}})))))}var He=function(e){var t=function(e){return e.outputs[0].isInverted=!0,e};return r.a.createElement(ve.a,{container:!0,className:e.className},r.a.createElement(_e,{svg:Oe.a,text:"AND gate",onClick:function(){return e.onSelect(ie.andGate)}}),r.a.createElement(_e,{svg:Oe.a,text:"NAND gate",onClick:function(){return e.onSelect((function(){return t(ie.andGate())}))},inverted:!0}),r.a.createElement(_e,{svg:Ee.a,text:"OR gate",onClick:function(){return e.onSelect(ie.orGate)}}),r.a.createElement(_e,{svg:Ee.a,text:"NOR gate",onClick:function(){return e.onSelect((function(){return t(ie.orGate())}))},inverted:!0}),r.a.createElement(_e,{svg:ye.a,text:"XOR gate",onClick:function(){return e.onSelect(ie.xorGate)}}),r.a.createElement(_e,{svg:we.a,text:"ground",onClick:function(){return e.onSelect((function(){return ie.constantGate(!1)}))}}),r.a.createElement(_e,{svg:ke.a,text:"+1",onClick:function(){return e.onSelect((function(){return ie.constantGate(!0)}))}}),r.a.createElement(_e,{svg:Ge.a,text:"buffer",onClick:function(){return e.onSelect((function(){return ie.buffer()}))}}),r.a.createElement(_e,{svg:Ge.a,text:"inverter",onClick:function(){return e.onSelect((function(){return t(ie.buffer())}))},inverted:!0}),r.a.createElement(_e,{svg:Ne.a,text:"LED",onClick:function(){return e.onSelect((function(){return ie.led()}))}}),r.a.createElement(_e,{svg:Ie.a,text:"switch",onClick:function(){return e.onSelect(ie.switchGate)}}),r.a.createElement(_e,{svg:Re.a,text:"sender",onClick:function(){return e.onSelect(ie.sender)}}),r.a.createElement(_e,{svg:Ue.a,text:"receiver",onClick:function(){return e.onSelect(ie.receiver)}}),r.a.createElement(_e,{svg:Xe.a,text:"2 to 1 mux",onClick:function(){return e.onSelect((function(){return ie.mux(1)}))}}),r.a.createElement(_e,{svg:Xe.a,text:"4 to 1 mux",onClick:function(){return e.onSelect((function(){return ie.mux(2)}))}}),r.a.createElement(_e,{svg:Ye.a,text:"1 to 2 demux",onClick:function(){return e.onSelect((function(){return ie.demux(1)}))}}),r.a.createElement(_e,{svg:Ye.a,text:"1 to 4 demux",onClick:function(){return e.onSelect((function(){return ie.demux(2)}))}}))},Je=n(198),ze=n(201),Ve=n(188),Ke=n(136),qe=n(184),Ze=n(187),$e=Object(J.a)((function(e){return{form:{"& > *":{margin:e.spacing(1)}}}}));function Qe(e){return r.a.createElement(Ke.a,null,r.a.createElement(qe.a,null,r.a.createElement(v.a,{title:"Invert pin"},r.a.createElement(ze.a,{checked:Boolean(e.pin.isInverted),onChange:function(t){var n=Object(o.a)({},e.pin);t.target.checked?n.isInverted=!0:delete n.isInverted,e.onChange(n)}}))),r.a.createElement(Ze.a,null," ",e.label||"Pin ".concat(e.index+1)," "),e.deletable&&r.a.createElement(g.a,{onClick:e.onPinDeleted},r.a.createElement(I.a,null)))}function et(e){var t=e.circuit,n=e.selection,i=$e(),c=Object(a.useMemo)((function(){return t.gates.filter((function(e){return n[e.id]}))}),[t,n]),l=Object(a.useMemo)((function(){return c.reduce((function(e,t){return Math.min(e,t.x)}),1/0)}),[c]),f=Object(a.useMemo)((function(){return c.reduce((function(e,t){return Math.min(e,t.y)}),1/0)}),[c]),p=Object(a.useMemo)((function(){return c.reduce((function(e,t){return void 0===e?t.label||"":t.label===e&&void 0!==t.label?e:""}),void 0)||""}),[c]),d=Object(a.useMemo)((function(){return c.every((function(e){return void 0!==e.label}))}),[c]),m=Object(a.useState)(0),b=Object(s.a)(m,2),v=b[0],h=b[1],O=Object(a.useState)(0),E=Object(s.a)(O,2),x=E[0],y=E[1],C=Object(a.useState)(""),k=Object(s.a)(C,2),S=k[0],w=k[1];Object(a.useEffect)((function(){h(l),y(f)}),[l,f]),Object(a.useEffect)((function(){w(p)}),[p]);var M=function(a){var r=Object(o.a)({},t);r.gates=t.gates.map((function(e){return n[e.id]?a(e):e})),e.onCircuitChanged(r)},N=c[0],P=function(n,a,r){var i=Object(o.a)({},t);i.gates=Object(u.a)(t.gates);var c=Object(o.a)({},N);i.gates[i.gates.indexOf(N)]=c,r?(c.outputs=Object(u.a)(c.outputs),c.outputs[n]=a):(c.inputs=Object(u.a)(c.inputs),c.inputs[n]=a),e.onCircuitChanged(i)},G=function(n,a){var r=Object(o.a)({},t);r.gates=Object(u.a)(t.gates);var i=Object(o.a)({},N);r.gates[r.gates.indexOf(N)]=i,a?i.outputs=i.outputs.filter((function(e,t){return t!==n})):i.inputs=i.inputs.filter((function(e,t){return t!==n})),r.gates=ie.removeInvalidConnections(r.gates),e.onCircuitChanged(r)};if(0===c.length)return r.a.createElement(j.a,{variant:"body1"},"Make a selection, then its properties will be available here.");var D="and"===N.type||"or"===N.type||"xor"===N.type,I=r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"h5"},"Inputs"),r.a.createElement(Ve.a,null,N.inputs.map((function(e,t){return r.a.createElement(Qe,{key:t,index:t,pin:e,label:"mux"===N.type&&(t<N.n?"Select ".concat(t+1):"Data ".concat(t-N.n+1)),onChange:function(e){return P(t,e,!1)},onPinDeleted:function(){return G(t,!1)},deletable:N.inputs.length>2&&D})})),D&&N.inputs.length<4&&r.a.createElement(Ke.a,null,r.a.createElement(g.a,{variant:"contained",fullWidth:!0,onClick:function(){return function(n){var a=Object(o.a)({},t);a.gates=Object(u.a)(t.gates);var r=Object(o.a)({},N);a.gates[a.gates.indexOf(N)]=r,n?r.outputs=[].concat(Object(u.a)(r.outputs),[ie.pin()]):r.inputs=[].concat(Object(u.a)(r.inputs),[ie.pin()]),e.onCircuitChanged(a)}(!1)}},"Add Pin"))),r.a.createElement(j.a,{variant:"h5"},"Outputs"),r.a.createElement(Ve.a,null,N.outputs.map((function(e,t){return r.a.createElement(Qe,{key:t,index:t,pin:e,onChange:function(e){return P(t,e,!0)},onPinDeleted:function(){return G(t,!0)}})}))));return r.a.createElement("form",{className:i.form,noValidate:!0},r.a.createElement(Je.a,{label:"X",variant:"filled",value:v,onChange:function(e){return h(e.target.value)},onBlur:function(e){isNaN(e.target.value)||M((function(t){return Object(o.a)({},t,{x:Number(e.target.value)-l+t.x})}))}}),r.a.createElement(Je.a,{label:"Y",variant:"filled",onChange:function(e){return y(e.target.value)},value:x,onBlur:function(e){isNaN(e.target.value)||M((function(t){return Object(o.a)({},t,{y:Number(e.target.value)-f+t.y})}))}}),r.a.createElement(Je.a,{label:"Label",variant:"filled",value:S,onChange:function(e){return w(e.target.value)},disabled:!d,onBlur:function(e){e.target.value.length>0&&M((function(t){return Object(o.a)({},t,{label:e.target.value})}))}}),1===c.length&&I)}var tt=n(91),nt=n.n(tt),at=n(92),rt=n.n(at),it=n(93),ct=n.n(it),ot=n(94),ut=n.n(ot),lt=n(95),st=n.n(lt),ft={and:function(){return Oe.a},or:function(){return Ee.a},xor:function(){return ye.a},buffer:function(){return Ge.a},led:function(e,t){return t&&ie.getInputs(e,t)[0]?ut.a:Ne.a},constant:function(e){return e.value?ke.a:we.a},switch:function(e,t){return t&&ie.getUserInput(e,t)?st.a:Ie.a},sender:function(){return Re.a},receiver:function(){return Ue.a},mux:function(){return Xe.a},demux:function(){return Ye.a}},pt={getPinSvg:function(e){return 0===e.connections.length?e.isInverted?rt.a:nt.a:e.isInverted?Te.a:ct.a},getGateSvg:function(e,t){return ft[e.type](e,t)},getPinPositions:function(e,t,n,a){var r=function(e,t){return(e-(t-1)/2)/Math.max(t-1,1)};if("mux"===e.type){var i={};return e.inputs.forEach((function(a,c){i[a.id]={x:t,y:n+.25-.3*r(c+(c>=e.n?1:0),e.inputs.length+1)}})),e.outputs.forEach((function(a,c){i[a.id]={x:t+.5,y:n+.25-.225*r(c,e.outputs.length)}})),i}if("demux"===e.type){var c={};return e.inputs.forEach((function(a,i){c[a.id]={x:t,y:n+.3-.2*r(i+(i>=e.n?1:0),e.inputs.length+1)}})),e.outputs.forEach((function(a,i){c[a.id]={x:t+.5,y:n+.25-.3*r(i,e.outputs.length)}})),c}var o={};return e.inputs.forEach((function(a,i){o[a.id]={x:t,y:n+.25-.225*r(i,e.inputs.length)}})),e.outputs.forEach((function(a,i){o[a.id]={x:t+.5,y:n+.25-.225*r(i,e.outputs.length)}})),o},getWidth:function(e,t){return.5},getHeight:function(e,t){return.5}},dt=n(96),mt=n.n(dt),bt=Object(J.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(2)},menuButtonGroup:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:320,flexShrink:0},drawerContent:{width:320,overflowX:"hidden"},content:{flexGrow:1,padding:e.spacing(3)},title:{flexGrow:1}}}));function gt(e){for(var t=Object(a.useState)(null),n=Object(s.a)(t,2),i=n[0],c=n[1],o=bt(),u=function(){return c(null)},l=[],f=function(t){l.push(r.a.createElement(y.a,{key:t,onClick:function(){e.onChangedPage(t),u()}},"Page ",t+1))},p=0;p<=e.pageCount;p++)f(p);return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{title:"Change page"},r.a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true","aria-label":"change page",className:o.menuButton,color:"inherit",onClick:function(e){return c(e.currentTarget)}},"Page ",1+e.page,r.a.createElement(H.a,null))),r.a.createElement(x.a,{keepMounted:!0,open:Boolean(i),onClose:u,anchorEl:i},l))}function vt(e){var t=e.children,n=e.value,a=e.index,i=Object(l.a)(e,["children","value","index"]);return r.a.createElement(w.a,{in:n===a},r.a.createElement("div",Object.assign({role:"tabpanel",id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i),n===a&&r.a.createElement(S.a,{p:3},t)))}var ht=function(){var e=function(e,t){var n=Object(a.useState)(e),r=Object(s.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)([]),l=Object(s.a)(o,2),f=l[0],p=l[1],d=Object(a.useState)([]),m=Object(s.a)(d,2),b=m[0],g=m[1],v=f.length>0,h=b.length>0;return[i,function(e){p([i].concat(Object(u.a)(f)).splice(-(t||1e3))),c(e),g([])},function(){v&&(g([i].concat(Object(u.a)(b))),c(f[0]),p(f.slice(1)))},function(){h&&(p([i].concat(Object(u.a)(f))),c(b[0]),g(b.slice(1)))}]}((function(){return ie.circuit([])})),t=Object(s.a)(e,4),n=t[0],i=t[1],c=t[2],l=t[3],S=Object(a.useState)(!1),w=Object(s.a)(S,2),M=w[0],P=w[1],D=Object(a.useState)(null),B=Object(s.a)(D,2),A=B[0],L=B[1],W=Object(a.useState)(!1),F=Object(s.a)(W,2),_=F[0],H=F[1],J=Object(a.useState)(null),z=Object(s.a)(J,2),V=z[0],K=z[1],q=Object(a.useState)(null),Z=Object(s.a)(q,2),$=Z[0],Q=Z[1],ee=Object(a.useState)(0),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(1),ce=Object(s.a)(re,2),oe=ce[0],ue=ce[1],le=Object(a.useState)(0),se=Object(s.a)(le,2),fe=se[0],pe=se[1],de=Object(a.useRef)(new mt.a),me=Object(a.useState)(null),be=Object(s.a)(me,2),ve=be[0],he=be[1],Oe=r.a.createRef(),je=r.a.createRef(),Ee=bt(),xe=function(){return Q(null)},ye=function(){P(Object.fromEntries(n.gates.filter((function(e){return(e.page||0)===ne})).map((function(e){return[e.id,!0]})))),xe()},Ce=function(){K(ie.removeInvalidConnections(n.gates.filter((function(e){return M[e.id]})))),xe()},ke=function(){if(V){var e=ie.renumber(n);e.gates=[].concat(Object(u.a)(e.gates),Object(u.a)(V.map((function(e){return Object(o.a)({},e,{page:ne})})))),i(e)}xe()},Se=function(){if(_)de.current.stopSimulation(),H(!1);else{var e=ie.getDuplicateSenderLabels(n.gates);0===e.length?(de.current.startSimulation(n),H(!0)):he("Uh oh! Multiple senders for labels: ".concat(e.join(", ")))}};Object(a.useEffect)((function(){var e=_;return function t(n){e?(L(n),de.current.getState().then(t)):L(null)}(null),function(){e=!1}}),[_]);var we=function(){var e=Object(o.a)({},n);e.gates=e.gates.filter((function(e){return!M[e.id]})),e.gates=ie.removeInvalidConnections(e.gates),i(e)},Me=function(){Ce(),we(),xe()},Ne=function(e){e>=0&&(ae(e),e>=oe&&ue(e+1))};return Object(a.useEffect)((function(){var e=function(e){if(e.target===document.body){var t=e.key.toUpperCase();e.getModifierState("Control")?"C"===t?Ce():"V"===t?ke():"X"===t?Me():"A"===t?ye():"Z"===t?c():"Y"===t&&l():"Delete"===e.key?we():"P"===t?Se():isNaN(e.key)?"+"===e.key?Ne(ne+1):"-"===e.key&&Ne(ne-1):Ne(Number(e.key)-1),e.preventDefault()}};return document.body.addEventListener("keydown",e),function(){return document.body.removeEventListener("keydown",e)}})),r.a.createElement("div",{className:Ee.root,onContextMenu:function(e){e.preventDefault(),Q([e.clientX-2,e.clientY-4])}},r.a.createElement(p.a,null),r.a.createElement(O.a,{variant:"persistent",className:Ee.drawer,open:!0},r.a.createElement(m.a,null),r.a.createElement("div",{className:Ee.drawerContent},r.a.createElement(C.a,{onChange:function(e,t){return pe(t)},value:fe,variant:"fullWidth"},r.a.createElement(k.a,{label:"Palette"}),r.a.createElement(k.a,{label:"Properties"})),r.a.createElement(vt,{value:fe,index:0},r.a.createElement(He,{onSelect:function(e){var t=Object(o.a)({},n);t.gates=Object(u.a)(t.gates);var a=e();t.gates.push(a);var r=Oe.current.getBoundingClientRect(),c=je.current.getBoundingClientRect();a.x=((r.width+320)/2-c.left)/96,a.y=((window.innerHeight+r.height)/2-c.top)/96,a.page=ne,i(t)}})),r.a.createElement(vt,{value:fe,index:1},r.a.createElement(et,{circuit:n,selection:M,onCircuitChanged:function(e){return i(e)}})))),r.a.createElement(d.a,{position:"fixed",className:Ee.appBar,ref:Oe},r.a.createElement(m.a,null,r.a.createElement(j.a,{variant:"h6",className:Ee.title},"Flux Logic"),r.a.createElement(gt,{page:ne,pageCount:oe,onChangedPage:Ne}),r.a.createElement(b.a,{className:Ee.menuButtonGroup,color:"inherit"},r.a.createElement(v.a,{title:"Upload project"},r.a.createElement(g.a,{"aria-label":"upload",onClick:function(){return new Promise((function(e,t){var n=document.createElement("input");n.setAttribute("type","file"),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(){this.files[0].text().then(JSON.parse).then((function(t){return e(t)})).catch((function(e){return t(e)}))}),!1),n.click(),document.body.removeChild(n)})).then((function(e){i(ie.renumber(e.circuit));var t=e.circuit.gates.reduce((function(e,t){return t.page?Math.max(e,t.page):e}),0),n=e.currentPage||0;ue(Math.max(n,t+1)),ae(n)})).catch((function(e){he("Uh oh! We weren't able to load that file."),console.error(e)}))}},r.a.createElement(T.a,null))),r.a.createElement(v.a,{title:"Download project"},r.a.createElement(g.a,{"aria-label":"download",onClick:function(){!function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t)))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("circuit.json",{version:f.version,circuit:n,currentPage:ne})}},r.a.createElement(Y.a,null)))),r.a.createElement(b.a,{className:Ee.menuButtonGroup,color:"inherit"},r.a.createElement(v.a,{title:"Undo"},r.a.createElement(g.a,{"aria-label":"undo",onClick:c},r.a.createElement(U.a,null))),r.a.createElement(v.a,{title:"Redo"},r.a.createElement(g.a,{"aria-label":"redo",onClick:l},r.a.createElement(R.a,null)))),r.a.createElement(v.a,{title:_?"Stop simulation":"Start simulation"},r.a.createElement(g.a,{"aria-label":_?"stop":"start",onClick:Se,className:Ee.menuButton,color:"inherit"},_?r.a.createElement(N.a,null):r.a.createElement(G.a,null))),r.a.createElement(v.a,{title:"Delete selection"},r.a.createElement(g.a,{"aria-label":"delete",onClick:we,className:Ee.menuButton,color:"inherit"},r.a.createElement(I.a,null))),r.a.createElement(v.a,{title:"Help"},r.a.createElement(g.a,{"aria-label":"help",className:Ee.menuButton,color:"inherit"},r.a.createElement(X.a,null))))),r.a.createElement(m.a,null),r.a.createElement("main",{className:Ee.content},r.a.createElement(m.a,null),r.a.createElement(h.a,null,r.a.createElement(ge,{page:ne,circuit:n,theme:pt,ref:je,selection:M,simState:A,onSelectionChanged:function(e){P(e)},onCircuitChanged:function(e){i(e)},onUserInputChanged:function(e,t){de.current.setUserInput(e,t)},editable:!A}))),r.a.createElement(E.a,{open:null!==ve,autoHideDuration:1e4,onClose:function(){he(null)},message:ve}),r.a.createElement(x.a,{keepMounted:!0,open:null!==$,onClose:xe,anchorReference:"anchorPosition",anchorPosition:$&&{left:$[0],top:$[1]}},r.a.createElement(y.a,{onClick:Me},"Cut"),r.a.createElement(y.a,{onClick:Ce},"Copy"),r.a.createElement(y.a,{onClick:ke},"Paste"),r.a.createElement(y.a,{onClick:ye},"Select all")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=n(105),jt=n(197),Et=Object(Ot.a)({palette:{primary:{light:"#5f5fc4",main:"#283593",dark:"#001064",contrastText:"#fff"},secondary:{light:"#ffbd45",main:"#fb8c00",dark:"#c25e00",contrastText:"#fff"}}});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),r.a.createElement(jt.a,{theme:Et},r.a.createElement(ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},49:function(e,t,n){e.exports=n.p+"static/media/and-gate.b39df76c.svg"},50:function(e,t,n){e.exports=n.p+"static/media/or-gate.ce29e395.svg"},51:function(e,t,n){e.exports=n.p+"static/media/led.788936c7.svg"},52:function(e,t,n){e.exports=n.p+"static/media/buffer-gate.96d07f6a.svg"},53:function(e,t,n){e.exports=n.p+"static/media/switch-off.b1ab986c.svg"},54:function(e,t,n){e.exports=n.p+"static/media/mux.148e9d2c.svg"},55:function(e,t,n){e.exports=n.p+"static/media/demux.7b2120ef.svg"},66:function(e,t,n){e.exports=n.p+"static/media/xor-gate.12bb51fa.svg"},67:function(e,t,n){e.exports=n.p+"static/media/one-gate.ac34b99c.svg"},68:function(e,t,n){e.exports=n.p+"static/media/zero-gate.d126f49d.svg"},69:function(e,t,n){e.exports=n.p+"static/media/sender.737fb0fa.svg"},70:function(e,t,n){e.exports=n.p+"static/media/receiver.34ee3b2e.svg"},71:function(e,t,n){e.exports=n.p+"static/media/pin-inverted.25b87449.svg"},89:function(e){e.exports=JSON.parse('{"name":"fluxlogic","homepage":"https://tcannon686.github.io/fluxlogic","version":"0.2.0","private":true,"dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","gh-pages":"^3.1.0","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"3.4.3","workerize-loader":"^1.3.0"},"scripts":{"predeploy":"yarn build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"standard"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"standard":"^14.3.4"}}')},91:function(e,t,n){e.exports=n.p+"static/media/open-pin.402b8aa6.svg"},92:function(e,t,n){e.exports=n.p+"static/media/open-pin-inverted.fb8a5ebb.svg"},93:function(e,t,n){e.exports=n.p+"static/media/pin.4c8eaca6.svg"},94:function(e,t,n){e.exports=n.p+"static/media/led-glow.ff1875d8.svg"},95:function(e,t,n){e.exports=n.p+"static/media/switch-on.37d11db0.svg"},96:function(e,t,n){var a=n(132),r=["startSimulation","getState","stopSimulation","setUserInput"];e.exports=function(){var e=new Worker(n.p+"9999bf6c9cd165a1cee9.worker.js",{name:"[hash].worker.js"});return a(e,r),e}}},[[121,1,2]]]);
//# sourceMappingURL=main.0b042109.chunk.js.map