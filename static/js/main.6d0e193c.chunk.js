(this.webpackJsonpmml2=this.webpackJsonpmml2||[]).push([[0],{39:function(e,t,n){e.exports=n.p+"static/media/and-gate.b39df76c.svg"},40:function(e,t,n){e.exports=n.p+"static/media/or-gate.ce29e395.svg"},41:function(e,t,n){e.exports=n.p+"static/media/led.788936c7.svg"},42:function(e,t,n){e.exports=n.p+"static/media/buffer-gate.96d07f6a.svg"},43:function(e,t,n){e.exports=n.p+"static/media/switch-off.b1ab986c.svg"},49:function(e,t,n){e.exports=n.p+"static/media/xor-gate.12bb51fa.svg"},50:function(e,t,n){e.exports=n.p+"static/media/one-gate.ac34b99c.svg"},51:function(e,t,n){e.exports=n.p+"static/media/zero-gate.d126f49d.svg"},52:function(e,t,n){e.exports=n.p+"static/media/pin-inverted.25b87449.svg"},64:function(e){e.exports=JSON.parse('{"name":"mml2","homepage":"https://tcannon686.github.io/mml2","version":"0.2.0","private":true,"dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","gh-pages":"^3.1.0","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"3.4.3","workerize-loader":"^1.3.0"},"scripts":{"predeploy":"yarn build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"standard"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"standard":"^14.3.4"}}')},66:function(e,t,n){e.exports=n.p+"static/media/open-pin.402b8aa6.svg"},67:function(e,t,n){e.exports=n.p+"static/media/open-pin-inverted.fb8a5ebb.svg"},68:function(e,t,n){e.exports=n.p+"static/media/pin.4c8eaca6.svg"},69:function(e,t,n){e.exports=n.p+"static/media/led-glow.ff1875d8.svg"},70:function(e,t,n){e.exports=n.p+"static/media/switch-on.37d11db0.svg"},71:function(e,t,n){var a=n(96),i=["startSimulation","getState","stopSimulation","setUserInput"];e.exports=function(){var e=new Worker(n.p+"1995daae4a069d13b604.worker.js",{name:"[hash].worker.js"});return a(e,i),e}},87:function(e,t,n){e.exports=n(99)},92:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(9),o=n.n(c),r=(n(92),n(12)),u=n(17),s=n(10),l=n(64),f=n(146),p=n(148),d=n(147),m=n(149),b=n(102),g=n(152),v=n(150),h=n(154),O=n(143),j=n(156),E=n(153),y=n(155),x=n(78),S=n.n(x),C=n(79),w=n.n(C),k=n(80),M=n.n(k),P=n(77),G=n.n(P),N=n(76),I=n.n(N),D=n(81),R=n.n(D),B=n(75),U=n.n(B),A=n(74),L=n.n(A),X=n(73),W=n.n(X),Y=n(140),_=n(101),F=n(57),H={and:function(e,t){return[z(e,t).every((function(e){return e}))]},or:function(e,t){return[z(e,t).some((function(e){return e}))]},xor:function(e,t){return[z(e,t).filter((function(e){return e})).length%2!==0]},constant:function(e,t){return[e.value]},led:function(e,t){return[]},buffer:function(e,t){return z(e,t)},switch:function(e,t){return[Boolean(K(e,t))]}};function T(){return{id:V(),connections:[]}}function J(e,t){var n={outputs:{},inputs:{}};if(t){var a,i=Object(F.a)(e.gates);try{for(i.s();!(a=i.n()).done;)for(var c=a.value,o=H[c.type](c,t),r=0;r<o.length;r++)n.outputs[c.outputs[r].id]=1===(o[r]^c.outputs[r].isInverted)}catch(m){i.e(m)}finally{i.f()}Object.assign(n.inputs,t.inputs)}else{var u,s=Object(F.a)(e.gates);try{for(s.s();!(u=s.n()).done;){var l,f=u.value,p=Object(F.a)(f.outputs);try{for(p.s();!(l=p.n()).done;){var d=l.value;n.outputs[d.id]=!1}}catch(m){p.e(m)}finally{p.f()}}}catch(m){s.e(m)}finally{s.f()}}return n}function z(e,t){return e.inputs.map((function(e){return 1===(t.outputs[e.connections[0]]^e.isInverted)}))}function K(e,t){return t.inputs[e.id]}var q=0;function V(){return q>=Number.MAX_SAFE_INTEGER&&(q=0),q++}var $=function(e){return Object.fromEntries(e.reduce((function(e,t){return e.concat(t.inputs.map((function(e){return e.id})),t.outputs.map((function(e){return e.id})))}),[]).map((function(e){return[e,!0]})))},Q={nextState:J,getOutputs:function(e,t){return e.outputs.map((function(e){return t.outputs[e.id]}))},getInputs:z,getUserInput:K,setUserInput:function(e,t,n){t.inputs[e.id]=n},fastForward:function(e,t,n){for(var a=0;a<t;a++)n=J(e,n);return n},renumber:function(e){var t=Object(r.a)({},e),n=q,a=function(e){return q<Number.MAX_SAFE_INTEGER-e?e+q:e-Number.MAX_SAFE_INTEGER+q},i=function(e){var t=Object(r.a)({},e,{id:a(e.id)});return t.id>n&&(n=t.id),t.connections&&(t.connections=t.connections.map(a)),t};return t.gates=t.gates.map((function(e){var t=i(e);return t.inputs=t.inputs.map(i),t.outputs=t.outputs.map(i),t})),q=n+1,t},connect:function(e,t){e.connections.push(t.id),t.connections.push(e.id)},circuit:function(e){return{gates:e}},andGate:function(){return{id:V(),type:"and",inputs:[T(),T()],outputs:Object.seal([T()])}},orGate:function(){return{id:V(),type:"or",inputs:[T(),T()],outputs:Object.seal([T()])}},xorGate:function(){return{id:V(),type:"xor",inputs:[T(),T()],outputs:Object.seal([T()])}},constantGate:function(e){return{id:V(),type:"constant",inputs:Object.seal([]),outputs:Object.seal([T()]),value:e||!1}},switchGate:function(){return{id:V(),type:"switch",inputs:Object.seal([]),outputs:Object.seal([T()])}},led:function(){return{id:V(),type:"led",inputs:Object.seal([T()]),outputs:Object.seal([])}},buffer:function(){return{id:V(),type:"buffer",inputs:Object.seal([T()]),outputs:Object.seal([T()])}},removeInvalidConnections:function(e){var t=$(e);return e.map((function(e){var n=Object(r.a)({},e),a=function(e){return Object(r.a)({},e,{connections:e.connections.filter((function(e){return t[e]}))})};return n.inputs=n.inputs.map(a),n.outputs=n.outputs.map(a),n}))},getValidPins:$};var Z=function(e){var t=Number(e.x0),n=Number(e.y0),a=Number(e.x1),c=Number(e.y1),o=Math.min(Math.abs(c-n),Math.abs(a-t)),r=.1+(a<t?.25*o:0),u=Math.min(t,a)-r,s=Math.min(n,c)-r,l=t-u+o,f=a-u-o,p=Math.abs(a-t)+2*r,d=Math.abs(c-n)+2*r,m="M ".concat(t-u," ").concat(n-s," ")+"C ".concat(l," ").concat(n-s,", ").concat(f," ").concat(c-s,", ").concat(a-u," ").concat(c-s);return i.a.createElement("svg",{width:"".concat(p,"in"),height:"".concat(d,"in"),viewBox:"0 0 ".concat(p," ").concat(d),style:{position:"absolute",left:"".concat(u,"in"),top:"".concat(s,"in"),pointerEvents:"none"}},i.a.createElement("path",{d:m,stroke:"black",strokeWidth:"0.01",fill:"transparent"}))},ee=function(e){var t=Object(a.useRef)(null),n=Object(a.useCallback)((function(){return t.current.apply(t,arguments)}),[]);return Object(a.useEffect)((function(){t.current=e}),[e]),n},te=n(33),ne=Object(Y.a)((function(e){return{selectedGate:{position:"absolute",left:0,top:0,background:Object(te.fade)(e.palette.primary.main,.3),borderRadius:"4px",cursor:"move"},gate:{position:"absolute",left:0,top:0},pin:{position:"absolute",left:0,top:0},editableGate:{position:"absolute",left:0,top:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object(te.fade)(e.palette.primary.main,.15)}},editablePin:{position:"absolute",margin:0,borderRadius:"4px",cursor:"pointer","&:hover":{background:Object(te.fade)(e.palette.primary.main,.3)}}}})),ae=i.a.memo((function(e){var t=e.theme,n=ne(),a=e.x,c=e.y,o=t.getWidth(e.gate),r=t.getHeight(e.gate),u=t.getPinPositions(e.gate,a,c),s=e.selected,l=function(o){return i.a.createElement("img",{alt:"",src:t.getPinSvg(o.pin),onMouseDown:function(t){return e.onPinMouseDown(t,o.pin,o.isOutput)},onMouseUp:function(t){return e.onPinMouseUp(t,o.pin,o.isOutput)},style:{left:"".concat(u[o.pin.id].x-a-.0625,"in"),top:"".concat(u[o.pin.id].y-c-.0625,"in")},className:e.editable?n.editablePin:n.pin})};return i.a.createElement("div",{style:{left:"".concat(a,"in"),top:"".concat(c,"in"),width:"".concat(o,"in"),height:"".concat(r,"in")},className:e.editable?s?n.selectedGate:n.editableGate:n.gate},e.gate.outputs.map((function(e){return i.a.createElement(Z,{key:"".concat(e.id,"-"),x0:u[e.id].x-a,y0:u[e.id].y-c,x1:u[e.id].x-a-.25,y1:u[e.id].y-c})})),e.gate.inputs.map((function(e){return i.a.createElement(Z,{key:"".concat(e.id,"-"),x0:u[e.id].x-a,y0:u[e.id].y-c,x1:u[e.id].x-a+.25,y1:u[e.id].y-c})})),i.a.createElement("img",{alt:e.gate.type,src:e.svg,style:{position:"absolute"},onClick:function(t){return e.onGateClick(t,e.gate)},onMouseDown:function(t){return e.onGateMouseDown(t,e.gate)}}),e.gate.inputs.map((function(e){return i.a.createElement(l,{pin:e,isOutput:!1,key:e.id})})),e.gate.outputs.map((function(e){return i.a.createElement(l,{pin:e,isOutput:!0,key:e.id})})))}));function ie(e){var t=e.theme,n=e.editable,c=e.circuit,o=e.page,r=Object(a.useMemo)((function(){return void 0!==o?c.gates.filter((function(e){return(e.page||0)===o})):c.gates}),[c,o]),u=e.selection,s=e.moveAmount,l=e.simState,f=Object(a.useMemo)((function(){var e={};return r.forEach((function(n){var a=(n.x||0)+(u[n.id]?s[0]:0),i=(n.y||0)+(u[n.id]?s[1]:0);Object.assign(e,t.getPinPositions(n,a,i))})),e}),[u,t,s,r]),p=ee(e.onGateClick),d=ee(e.onGateMouseDown),m=ee(e.onPinMouseUp),b=ee(e.onPinMouseDown);return i.a.createElement(i.a.Fragment,null,r.map((function(e){return e.inputs.filter((function(e){return e.connections[0]})).map((function(e){return i.a.createElement(Z,{key:"".concat(e.id,"-").concat(e.connections[0].id),x0:f[e.connections[0]].x,y0:f[e.connections[0]].y,x1:f[e.id].x,y1:f[e.id].y})}))})),r.map((function(a){var c=(a.x||0)+(e.selection[a.id]?s[0]:0),o=(a.y||0)+(e.selection[a.id]?s[1]:0);return i.a.createElement(ae,{gate:a,svg:t.getGateSvg(a,l),x:c,y:o,key:a.id,theme:t,selected:u[a.id],editable:n,onGateClick:p,onGateMouseDown:d,onPinMouseDown:b,onPinMouseUp:m})})))}var ce=Object(Y.a)((function(e){return{selectionBox:{position:"fixed",background:Object(te.fade)(e.palette.primary.main,.3),pointerEvents:"none"}}}));var oe=function(e){var t=Object(a.useState)(e.selectionStart),n=Object(s.a)(t,2),c=n[0],o=n[1],r=e.selectionStart,u=e.onSelectionChanged,l=ce();return Object(a.useEffect)((function(){var e=function(e){var t=[e.clientX,e.clientY];o(t),u([Math.min(r[0],t[0]),Math.min(r[1],t[1])],[Math.max(r[0],t[0]),Math.max(r[1],t[1])])};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[r,u]),c[0]!==e.selectionStart[0]&&c[1]!==e.selectionStart[1]&&i.a.createElement("div",{className:l.selectionBox,style:{left:Math.min(e.selectionStart[0],c[0]),top:Math.min(e.selectionStart[1],c[1]),width:Math.abs(c[0]-e.selectionStart[0]),height:Math.abs(c[1]-e.selectionStart[1])}})},re=Object(Y.a)((function(e){return{page:{width:"8.5in",height:"11in",position:"relative"}}}));function ue(e){var t=Object(a.useState)([e.x0,e.y0]),n=Object(s.a)(t,2),c=n[0],o=n[1],r=e.clientToPage;return Object(a.useEffect)((function(){var e=function(e){o(r([e.clientX,e.clientY]))};return document.addEventListener("mousemove",e),function(){document.removeEventListener("mousemove",e)}}),[r]),e.isOutputPin?i.a.createElement(Z,{x0:e.x0,y0:e.y0,x1:c[0],y1:c[1]}):i.a.createElement(Z,{x1:e.x0,y1:e.y0,x0:c[0],y0:c[1]})}var se=i.a.forwardRef((function(e,t){var n=e.selection,c=e.theme,o=e.simState,l=e.editable,f=e.circuit,p=e.page,d=e.onCircuitChanged,m=e.onSelectionChanged,b=e.onUserInputChanged,g=re(),v=Object(a.useState)(null),h=Object(s.a)(v,2),O=h[0],j=h[1],E=Object(a.useState)({}),y=Object(s.a)(E,2),x=y[0],S=y[1],C=Object(a.useState)(!1),w=Object(s.a)(C,2),k=w[0],M=w[1],P=Object(a.useState)(!1),G=Object(s.a)(P,2),N=G[0],I=G[1],D=Object(a.useState)([0,0]),R=Object(s.a)(D,2),B=R[0],U=R[1],A=Object(a.useState)([0,0]),L=Object(s.a)(A,2),X=L[0],W=L[1],Y=Object(a.useState)(null),F=Object(s.a)(Y,2),H=F[0],T=F[1],J=Object(a.useState)(!1),z=Object(s.a)(J,2),K=z[0],q=z[1],V=Object(a.useMemo)((function(){return void 0!==p?f.gates.filter((function(e){return(e.page||0)===p})):f.gates}),[f,p]),$=k?[(X[0]-B[0])/96,(X[1]-B[1])/96]:[0,0],Z=function(e){var n=t.current.getBoundingClientRect();return[(e[0]-n.left)/96,(e[1]-n.top)/96]},ee=Object(a.useCallback)((function(e,t){if(l&&0===e.button){if(!N){var a={};e.shiftKey&&Object.assign(a,n),a[t.id]=!a[t.id],m(a),e.stopPropagation()}}else null!=o&&"switch"===t.type&&b(t,!Q.getUserInput(t,o))}),[n,l,N,m,b,o]),te=Object(a.useCallback)((function(e,t){l&&0===e.button&&(U([e.clientX,e.clientY]),W([e.clientX,e.clientY]),I(!1),n[t.id]&&M(!0),e.stopPropagation()),e.preventDefault()}),[l,n,U,W,I]),ne=Object(a.useCallback)((function(e){var t=Object(r.a)({},f);t.gates=t.gates.map((function(t){return n[t.id]&&((t=Object(r.a)({},t)).x+=e[0],t.y+=e[1]),t})),d(t)}),[f,n,d]),ae=Object(a.useCallback)((function(e,t){var n=Object(r.a)({},f),a=function(n,a){if(a||0===n.connections.length){if(n.id===e)return Object(r.a)({},n,{connections:[].concat(Object(u.a)(n.connections),[t])});if(n.id===t)return Object(r.a)({},n,{connections:[].concat(Object(u.a)(n.connections),[e])})}return n},i=!1;n.gates=n.gates.map((function(e){var t=!1,n=e.inputs.map((function(e){var n=a(e);return n!==e&&(t=!0),n}));return t?(i=!0,Object(r.a)({},e,{inputs:n})):e})),i&&(n.gates=n.gates.map((function(e){var t=!1,n=e.outputs.map((function(e){var n=a(e,!0);return n!==e&&(t=!0),n}));return t?Object(r.a)({},e,{outputs:n}):e})),d(n))}),[f,d]),ce=Object(a.useCallback)((function(e,t,n){if(l&&0===e.button)if(n)T(t.id),q(n);else if(t.connections.length>0){var a=Object(r.a)({},f);a.gates=a.gates.map((function(e){var n=e.inputs.indexOf(t),a=e.outputs.findIndex((function(e){return e.id===t.connections[0]}));if(-1!==n){var i=Object(r.a)({},e,{inputs:Object(u.a)(e.inputs)});return i.inputs[n]=Object(r.a)({},t,{connections:[]}),i}if(-1!==a){var c=e.outputs[a],o=Object(r.a)({},e,{outputs:Object(u.a)(e.outputs)});return o.outputs[a]=Object(r.a)({},c,{connections:c.connections.filter((function(e){return e!==t.id}))}),o}return e})),d(a),T(t.connections[0]),q(!0)}else T(t.id),q(n);e.stopPropagation(),e.preventDefault()}),[f,l,T,q,d]),se=Object(a.useCallback)((function(e,t,n){l&&(null!==H&&H!==t.id&&n^K&&(ae(H,t.id),e.stopPropagation(),e.preventDefault()),T(null))}),[l,H,K,ae]),le=Object(r.a)({},e.selection,{},x),fe=Object(a.useMemo)((function(){var e={};return f.gates.forEach((function(t){var a=(t.x||0)+(n[t.id]?$[0]:0),i=(t.y||0)+(n[t.id]?$[1]:0);Object.assign(e,c.getPinPositions(t,a,i))})),e}),[n,c,$,f]);return Object(a.useEffect)((function(){var e=function(e){l?0===e.button&&(k?(ne($),M(!1),e.stopPropagation()):O&&(S({}),m(le)),j(null),null!==H&&T(null),e.preventDefault()):e.preventDefault()};return window.addEventListener("mouseup",e),function(){return window.removeEventListener("mouseup",e)}})),Object(a.useEffect)((function(){if(l){var e=function(e){k&&W([e.clientX,e.clientY]),N||I(!0)};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}}),[k,N,l]),i.a.createElement(_.a,{elevation:3,square:!0,className:g.page,ref:t,onMouseDown:function(e){l&&0===e.button&&(j([e.clientX,e.clientY]),e.shiftKey||m({})),e.preventDefault()}},l&&null!==H&&i.a.createElement(ue,{x0:fe[H].x,y0:fe[H].y,clientToPage:Z,isOutputPin:K}),i.a.createElement(ie,{page:e.page,circuit:f,editable:l,selection:le,theme:c,moveAmount:$,onPinMouseDown:ce,onPinMouseUp:se,onGateClick:ee,onGateMouseDown:te,simState:o}),l&&O&&i.a.createElement(oe,{selectionStart:O,onSelectionChanged:function(t,n){var a=Z(t),i=Z(n),c=null;V.forEach((function(t){var n=e.theme.getWidth(t),o=e.theme.getHeight(t),r=t.x>=a[0]&&t.y>=a[1]&&t.x+n<=i[0]&&t.y+o<=i[1];r&&!x[t.id]?(c||(c=Object.assign({},x)),c[t.id]=!0):!r&&x[t.id]&&(c||(c=Object.assign({},x)),delete c[t.id])})),c&&S(c)}}))})),le=n(142),fe=n(39),pe=n.n(fe),de=n(40),me=n.n(de),be=n(49),ge=n.n(be),ve=n(50),he=n.n(ve),Oe=n(51),je=n.n(Oe),Ee=n(41),ye=n.n(Ee),xe=n(42),Se=n.n(xe),Ce=n(43),we=n.n(Ce),ke=n(52),Me=n.n(ke);function Pe(e){return i.a.createElement(le.a,{item:!0,xs:3},i.a.createElement(O.a,{title:"Add ".concat(e.text)},i.a.createElement(b.a,{onClick:e.onClick},i.a.createElement("div",{style:{position:"relative",width:"0.5in",height:"0.5in",overflow:"hidden"}},e.inverted&&i.a.createElement(Z,{x0:.25,y0:.25,x1:.4375,y1:.25}),e.inverted&&i.a.createElement("img",{src:Me.a,alt:"",style:{position:"absolute",left:"".concat(.375,"in"),top:"".concat(.1875,"in")}}),i.a.createElement("img",{src:e.svg,alt:"",style:{position:"absolute",left:e.inverted?"-0.0625in":0,top:0}})))))}var Ge=function(e){var t=function(e){return e.outputs[0].isInverted=!0,e};return i.a.createElement(le.a,{container:!0,className:e.className},i.a.createElement(Pe,{svg:pe.a,text:"AND gate",onClick:function(){return e.onSelect(Q.andGate)}}),i.a.createElement(Pe,{svg:pe.a,text:"NAND gate",onClick:function(){return e.onSelect((function(){return t(Q.andGate())}))},inverted:!0}),i.a.createElement(Pe,{svg:me.a,text:"OR gate",onClick:function(){return e.onSelect(Q.orGate)}}),i.a.createElement(Pe,{svg:me.a,text:"NOR gate",onClick:function(){return e.onSelect((function(){return t(Q.orGate())}))},inverted:!0}),i.a.createElement(Pe,{svg:ge.a,text:"XOR gate",onClick:function(){return e.onSelect(Q.xorGate)}}),i.a.createElement(Pe,{svg:je.a,text:"ground",onClick:function(){return e.onSelect((function(){return Q.constantGate(!1)}))}}),i.a.createElement(Pe,{svg:he.a,text:"+1",onClick:function(){return e.onSelect((function(){return Q.constantGate(!0)}))}}),i.a.createElement(Pe,{svg:Se.a,text:"buffer",onClick:function(){return e.onSelect((function(){return Q.buffer()}))}}),i.a.createElement(Pe,{svg:Se.a,text:"inverter",onClick:function(){return e.onSelect((function(){return t(Q.buffer())}))},inverted:!0}),i.a.createElement(Pe,{svg:ye.a,text:"LED",onClick:function(){return e.onSelect((function(){return Q.led()}))}}),i.a.createElement(Pe,{svg:we.a,text:"switch",onClick:function(){return e.onSelect(Q.switchGate)}}))},Ne=n(66),Ie=n.n(Ne),De=n(67),Re=n.n(De),Be=n(68),Ue=n.n(Be),Ae=n(69),Le=n.n(Ae),Xe=n(70),We=n.n(Xe),Ye={and:function(){return pe.a},or:function(){return me.a},xor:function(){return ge.a},buffer:function(){return Se.a},led:function(e,t){return t&&Q.getInputs(e,t)[0]?Le.a:ye.a},constant:function(e){return e.value?he.a:je.a},switch:function(e,t){return t&&Q.getUserInput(e,t)?We.a:we.a}},_e={getPinSvg:function(e){return 0===e.connections.length?e.isInverted?Re.a:Ie.a:e.isInverted?Me.a:Ue.a},getGateSvg:function(e,t){return Ye[e.type](e,t)},getPinPositions:function(e,t,n,a){var i={};return e.inputs.forEach((function(a,c){i[a.id]={x:t,y:n+.25+.2*(c-(e.inputs.length-1)/2)}})),e.outputs.forEach((function(e,a){i[e.id]={x:t+.5,y:n+.25}})),i},getWidth:function(e,t){return.5},getHeight:function(e,t){return.5}},Fe=n(71),He=n.n(Fe),Te=Object(Y.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginRight:e.spacing(2)},menuButtonGroup:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:256,flexShrink:0},drawerContent:{width:256},content:{flexGrow:1,padding:e.spacing(3)},title:{flexGrow:1}}}));function Je(e){for(var t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Te(),u=function(){return o(null)},l=[],f=function(t){l.push(i.a.createElement(y.a,{onClick:function(){e.onChangedPage(t),u()}},"Page ",t+1))},p=0;p<=e.pageCount;p++)f(p);return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{title:"Change page"},i.a.createElement(b.a,{"aria-controls":"simple-menu","aria-haspopup":"true","aria-label":"change page",className:r.menuButton,color:"inherit",onClick:function(e){return o(e.currentTarget)}},"Page ",1+e.page,i.a.createElement(W.a,null))),i.a.createElement(E.a,{keepMounted:!0,open:Boolean(c),onClose:u,anchorEl:c},l))}var ze=function(){var e=function(e,t){var n=Object(a.useState)(e),i=Object(s.a)(n,2),c=i[0],o=i[1],r=Object(a.useState)([]),l=Object(s.a)(r,2),f=l[0],p=l[1],d=Object(a.useState)([]),m=Object(s.a)(d,2),b=m[0],g=m[1],v=f.length>0,h=b.length>0;return[c,function(e){p([c].concat(Object(u.a)(f)).splice(-(t||1e3))),o(e),g([])},function(){v&&(g([c].concat(Object(u.a)(b))),o(f[0]),p(f.slice(1)))},function(){h&&(p([c].concat(Object(u.a)(f))),o(b[0]),g(b.slice(1)))}]}((function(){return Q.circuit([])})),t=Object(s.a)(e,4),n=t[0],c=t[1],o=t[2],x=t[3],C=Object(a.useState)(!1),k=Object(s.a)(C,2),P=k[0],N=k[1],D=Object(a.useState)(null),B=Object(s.a)(D,2),A=B[0],X=B[1],W=Object(a.useState)(!1),Y=Object(s.a)(W,2),_=Y[0],F=Y[1],H=Object(a.useState)(null),T=Object(s.a)(H,2),J=T[0],z=T[1],K=Object(a.useState)(null),q=Object(s.a)(K,2),V=q[0],$=q[1],Z=Object(a.useState)(0),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(1),ie=Object(s.a)(ae,2),ce=ie[0],oe=ie[1],re=Object(a.useRef)(new He.a),ue=Object(a.useState)(!1),le=Object(s.a)(ue,2),fe=le[0],pe=le[1],de=i.a.createRef(),me=i.a.createRef(),be=Te(),ge=function(){return $(null)};return Object(a.useEffect)((function(){var e=_;return function t(n){e?(X(n),re.current.getState().then(t)):X(null)}(null),function(){e=!1}}),[_]),i.a.createElement("div",{className:be.root,onContextMenu:function(e){e.preventDefault(),$([e.clientX-2,e.clientY-4])}},i.a.createElement(f.a,null),i.a.createElement(h.a,{variant:"persistent",className:be.drawer,open:!0},i.a.createElement(d.a,null),i.a.createElement(Ge,{className:be.drawerContent,onSelect:function(e){var t=Object(r.a)({},n);t.gates=Object(u.a)(t.gates);var a=e();t.gates.push(a);var i=de.current.getBoundingClientRect(),o=me.current.getBoundingClientRect();a.x=((i.width+256)/2-o.left)/96,a.y=((window.innerHeight+i.height)/2-o.top)/96,a.page=te,c(t)}})),i.a.createElement(p.a,{position:"fixed",className:be.appBar,ref:de},i.a.createElement(d.a,null,i.a.createElement(O.a,{variant:"h6",className:be.title},"MML2"),i.a.createElement(Je,{page:te,pageCount:ce,onChangedPage:function(e){ne(e),e>=ce&&oe(e+1)}}),i.a.createElement(m.a,{className:be.menuButtonGroup,color:"inherit"},i.a.createElement(g.a,{title:"Upload project"},i.a.createElement(b.a,{"aria-label":"upload",onClick:function(){return new Promise((function(e,t){var n=document.createElement("input");n.setAttribute("type","file"),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(){this.files[0].text().then(JSON.parse).then((function(t){return e(t)})).catch((function(e){return t(e)}))}),!1),n.click(),document.body.removeChild(n)})).then((function(e){c(Q.renumber(e.circuit));var t=e.circuit.gates.reduce((function(e,t){return t.page?Math.max(e,t.page):e}),0),n=e.currentPage||0;oe(Math.max(n,t+1)),ne(n)})).catch((function(e){pe(!0),console.error(e)}))}},i.a.createElement(L.a,null))),i.a.createElement(g.a,{title:"Download project"},i.a.createElement(b.a,{"aria-label":"download",onClick:function(){!function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t)))),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("circuit.json",{version:l.version,circuit:n,currentPage:te})}},i.a.createElement(U.a,null)))),i.a.createElement(m.a,{className:be.menuButtonGroup,color:"inherit"},i.a.createElement(g.a,{title:"Undo"},i.a.createElement(b.a,{"aria-label":"undo",onClick:o},i.a.createElement(I.a,null))),i.a.createElement(g.a,{title:"Redo"},i.a.createElement(b.a,{"aria-label":"redo",onClick:x},i.a.createElement(G.a,null)))),i.a.createElement(g.a,{title:_?"Stop simulation":"Start simulation"},i.a.createElement(b.a,{"aria-label":_?"stop":"start",onClick:function(){_?(re.current.stopSimulation(),F(!1)):(re.current.startSimulation(n),F(!0))},className:be.menuButton,color:"inherit"},_?i.a.createElement(S.a,null):i.a.createElement(w.a,null))),i.a.createElement(g.a,{title:"Delete selection"},i.a.createElement(b.a,{"aria-label":"delete",onClick:function(){var e=Object(r.a)({},n);e.gates=e.gates.filter((function(e){return!P[e.id]})),e.gates=Q.removeInvalidConnections(e.gates),c(e)},className:be.menuButton,color:"inherit"},i.a.createElement(M.a,null))),i.a.createElement(g.a,{title:"Help"},i.a.createElement(b.a,{"aria-label":"help",className:be.menuButton,color:"inherit"},i.a.createElement(R.a,null))))),i.a.createElement(d.a,null),i.a.createElement("main",{className:be.content},i.a.createElement(d.a,null),i.a.createElement(v.a,null,i.a.createElement(se,{page:te,circuit:n,theme:_e,ref:me,selection:P,simState:A,onSelectionChanged:function(e){N(e)},onCircuitChanged:function(e){c(e)},onUserInputChanged:function(e,t){re.current.setUserInput(e,t)},editable:!A}))),i.a.createElement(j.a,{open:fe,autoHideDuration:1e4,onClose:function(){pe(!1)},message:"Uh oh! We weren't able to load that file."}),i.a.createElement(E.a,{keepMounted:!0,open:null!==V,onClose:ge,anchorReference:"anchorPosition",anchorPosition:V&&{left:V[0],top:V[1]}},i.a.createElement(y.a,{onClick:function(){z(Q.removeInvalidConnections(n.gates.filter((function(e){return P[e.id]})))),ge()}},"Copy"),i.a.createElement(y.a,{onClick:function(){if(J){var e=Q.renumber(n);e.gates=[].concat(Object(u.a)(e.gates),Object(u.a)(J.map((function(e){return Object(r.a)({},e,{page:te})})))),c(e)}ge()}},"Paste"),i.a.createElement(y.a,{onClick:function(){N(Object.fromEntries(n.gates.filter((function(e){return(e.page||0)===te})).map((function(e){return[e.id,!0]})))),ge()}},"Select all")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),i.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[87,1,2]]]);
//# sourceMappingURL=main.6d0e193c.chunk.js.map