(this.webpackJsonpmml2=this.webpackJsonpmml2||[]).push([[0],{38:function(t,e,n){t.exports=n.p+"static/media/and-gate.b39df76c.svg"},39:function(t,e,n){t.exports=n.p+"static/media/or-gate.ce29e395.svg"},40:function(t,e,n){t.exports=n.p+"static/media/led.788936c7.svg"},41:function(t,e,n){t.exports=n.p+"static/media/buffer-gate.96d07f6a.svg"},42:function(t,e,n){t.exports=n.p+"static/media/switch-off.b1ab986c.svg"},48:function(t,e,n){t.exports=n.p+"static/media/one-gate.ac34b99c.svg"},49:function(t,e,n){t.exports=n.p+"static/media/zero-gate.d126f49d.svg"},50:function(t,e,n){t.exports=n.p+"static/media/pin-inverted.25b87449.svg"},63:function(t){t.exports=JSON.parse('{"name":"mml2","homepage":"https://tcannon686.github.io/mml2","version":"0.2.0","private":true,"dependencies":{"@material-ui/core":"^4.11.1","@material-ui/icons":"^4.9.1","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","gh-pages":"^3.1.0","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"3.4.3","workerize-loader":"^1.3.0"},"scripts":{"predeploy":"yarn build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","lint":"standard"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"standard":"^14.3.4"}}')},65:function(t,e,n){t.exports=n.p+"static/media/open-pin.402b8aa6.svg"},66:function(t,e,n){t.exports=n.p+"static/media/open-pin-inverted.fb8a5ebb.svg"},67:function(t,e,n){t.exports=n.p+"static/media/pin.4c8eaca6.svg"},68:function(t,e,n){t.exports=n.p+"static/media/led-glow.ff1875d8.svg"},69:function(t,e,n){t.exports=n.p+"static/media/switch-on.37d11db0.svg"},70:function(t,e,n){var a=n(94),i=["startSimulation","getState","stopSimulation","setUserInput"];t.exports=function(){var t=new Worker(n.p+"0b06bb78d7d6425039f3.worker.js",{name:"[hash].worker.js"});return a(t,i),t}},85:function(t,e,n){t.exports=n(97)},90:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(9),c=n.n(o),r=(n(90),n(21)),u=n(12),s=n(11),l=n(63),f=n(142),p=n(145),d=n(144),m=n(146),b=n(99),g=n(151),v=n(148),h=n(150),O=n(141),E=n(153),j=n(152),y=n(154),x=n(76),w=n.n(x),S=n(77),C=n.n(S),k=n(78),M=n.n(k),N=n(75),P=n.n(N),G=n(74),I=n.n(G),D=n(79),R=n.n(D),B=n(73),U=n.n(B),A=n(72),L=n.n(A),X=n(138),W=n(55),Y={and:function(t,e){return[F(t,e).every((function(t){return t}))]},or:function(t,e){return[F(t,e).some((function(t){return t}))]},constant:function(t,e){return[t.value]},led:function(t,e){return[]},buffer:function(t,e){return F(t,e)},switch:function(t,e){return[Boolean(J(t,e))]}};function _(){return{id:z(),connections:[]}}function H(t,e){var n={outputs:{},inputs:{}};if(e){var a,i=Object(W.a)(t.gates);try{for(i.s();!(a=i.n()).done;)for(var o=a.value,c=Y[o.type](o,e),r=0;r<c.length;r++)n.outputs[o.outputs[r].id]=1===(c[r]^o.outputs[r].isInverted)}catch(m){i.e(m)}finally{i.f()}Object.assign(n.inputs,e.inputs)}else{var u,s=Object(W.a)(t.gates);try{for(s.s();!(u=s.n()).done;){var l,f=u.value,p=Object(W.a)(f.outputs);try{for(p.s();!(l=p.n()).done;){var d=l.value;n.outputs[d.id]=!1}}catch(m){p.e(m)}finally{p.f()}}}catch(m){s.e(m)}finally{s.f()}}return n}function F(t,e){return t.inputs.map((function(t){return 1===(e.outputs[t.connections[0]]^t.isInverted)}))}function J(t,e){return e.inputs[t.id]}var T=0;function z(){return T>=Number.MAX_SAFE_INTEGER&&(T=0),T++}var K=function(t){return Object.fromEntries(t.reduce((function(t,e){return t.concat(e.inputs.map((function(t){return t.id})),e.outputs.map((function(t){return t.id})))}),[]).map((function(t){return[t,!0]})))},V={nextState:H,getOutputs:function(t,e){return t.outputs.map((function(t){return e.outputs[t.id]}))},getInputs:F,getUserInput:J,setUserInput:function(t,e,n){e.inputs[t.id]=n},fastForward:function(t,e,n){for(var a=0;a<e;a++)n=H(t,n);return n},renumber:function(t){var e=Object(u.a)({},t),n=T,a=function(t){return T<Number.MAX_SAFE_INTEGER-t?t+T:t-Number.MAX_SAFE_INTEGER+T},i=function(t){var e=Object(u.a)({},t,{id:a(t.id)});return e.id>n&&(n=e.id),e.connections&&(e.connections=e.connections.map(a)),e};return e.gates=e.gates.map((function(t){var e=i(t);return e.inputs=e.inputs.map(i),e.outputs=e.outputs.map(i),e})),T=n+1,e},connect:function(t,e){t.connections.push(e.id),e.connections.push(t.id)},circuit:function(t){return{gates:t}},andGate:function(){return{id:z(),type:"and",inputs:[_(),_()],outputs:Object.seal([_()])}},orGate:function(){return{id:z(),type:"or",inputs:[_(),_()],outputs:Object.seal([_()])}},constantGate:function(t){return{id:z(),type:"constant",inputs:Object.seal([]),outputs:Object.seal([_()]),value:t||!1}},switchGate:function(){return{id:z(),type:"switch",inputs:Object.seal([]),outputs:Object.seal([_()])}},led:function(){return{id:z(),type:"led",inputs:Object.seal([_()]),outputs:Object.seal([])}},buffer:function(){return{id:z(),type:"buffer",inputs:Object.seal([_()]),outputs:Object.seal([_()])}},removeInvalidConnections:function(t){var e=K(t);return t.map((function(t){var n=Object(u.a)({},t),a=function(t){return Object(u.a)({},t,{connections:t.connections.filter((function(t){return e[t]}))})};return n.inputs=n.inputs.map(a),n.outputs=n.outputs.map(a),n}))},getValidPins:K};var $=function(t){var e=Number(t.x0),n=Number(t.y0),a=Number(t.x1),o=Number(t.y1),c=Math.min(Math.abs(o-n),Math.abs(a-e)),r=.1+(a<e?.25*c:0),u=Math.min(e,a)-r,s=Math.min(n,o)-r,l=e-u+c,f=a-u-c,p=Math.abs(a-e)+2*r,d=Math.abs(o-n)+2*r,m="M ".concat(e-u," ").concat(n-s," ")+"C ".concat(l," ").concat(n-s,", ").concat(f," ").concat(o-s,", ").concat(a-u," ").concat(o-s);return i.a.createElement("svg",{width:"".concat(p,"in"),height:"".concat(d,"in"),viewBox:"0 0 ".concat(p," ").concat(d),style:{position:"absolute",left:"".concat(u,"in"),top:"".concat(s,"in"),pointerEvents:"none"}},i.a.createElement("path",{d:m,stroke:"black",strokeWidth:"0.01",fill:"transparent"}))},q=function(t){var e=Object(a.useRef)(null),n=Object(a.useCallback)((function(){return e.current.apply(e,arguments)}),[]);return Object(a.useEffect)((function(){e.current=t}),[t]),n},Q=n(47),Z=Object(X.a)((function(t){return{selectedGate:{position:"absolute",margin:"-1px",left:0,top:0,border:"1px solid ".concat(t.palette.primary.main),background:Object(Q.fade)(t.palette.primary.main,.25),borderRadius:"4px",cursor:"move"},gate:{position:"absolute",left:0,top:0},pin:{position:"absolute",left:0,top:0},editableGate:{position:"absolute",left:0,top:0,margin:"-1px",border:"1px solid #ffffff00",borderRadius:"4px",cursor:"pointer","&:hover":{border:"1px solid ".concat(t.palette.primary.main)}},editablePin:{position:"absolute",margin:0,borderRadius:"4px",cursor:"pointer","&:hover":{border:"1px solid ".concat(t.palette.primary.main),margin:"-1px"}}}})),tt=i.a.memo((function(t){var e=t.theme,n=Z(),a=t.x,o=t.y,c=e.getWidth(t.gate),r=e.getHeight(t.gate),u=e.getPinPositions(t.gate,a,o),s=t.selected,l=function(c){return i.a.createElement("img",{alt:"",src:e.getPinSvg(c.pin),onMouseDown:function(e){return t.onPinMouseDown(e,c.pin,c.isOutput)},onMouseUp:function(e){return t.onPinMouseUp(e,c.pin,c.isOutput)},style:{left:"".concat(u[c.pin.id].x-a-.0625,"in"),top:"".concat(u[c.pin.id].y-o-.0625,"in")},className:t.editable?n.editablePin:n.pin})};return i.a.createElement("div",{style:{left:"".concat(a,"in"),top:"".concat(o,"in"),width:"".concat(c,"in"),height:"".concat(r,"in")},className:s?n.selectedGate:t.editable?n.editableGate:n.gate},t.gate.outputs.map((function(t){return i.a.createElement($,{key:"".concat(t.id,"-"),x0:u[t.id].x-a,y0:u[t.id].y-o,x1:u[t.id].x-a-.25,y1:u[t.id].y-o})})),t.gate.inputs.map((function(t){return i.a.createElement($,{key:"".concat(t.id,"-"),x0:u[t.id].x-a,y0:u[t.id].y-o,x1:u[t.id].x-a+.25,y1:u[t.id].y-o})})),i.a.createElement("img",{alt:t.gate.type,src:t.svg,style:{position:"absolute"},onClick:function(e){return t.onGateClick(e,t.gate)},onMouseDown:function(e){return t.onGateMouseDown(e,t.gate)}}),t.gate.inputs.map((function(t){return i.a.createElement(l,{pin:t,isOutput:!1,key:t.id})})),t.gate.outputs.map((function(t){return i.a.createElement(l,{pin:t,isOutput:!0,key:t.id})})))}));function et(t){var e=t.theme,n=t.editable,o=t.circuit,c=t.selection,r=t.moveAmount,u=t.simState,s=Object(a.useMemo)((function(){var t={};return o.gates.forEach((function(n){var a=(n.x||0)+(c[n.id]?r[0]:0),i=(n.y||0)+(c[n.id]?r[1]:0);Object.assign(t,e.getPinPositions(n,a,i))})),t}),[c,e,r,o]),l=q(t.onGateClick),f=q(t.onGateMouseDown),p=q(t.onPinMouseUp),d=q(t.onPinMouseDown);return i.a.createElement(i.a.Fragment,null,o.gates.map((function(t){return t.inputs.filter((function(t){return t.connections[0]})).map((function(t){return i.a.createElement($,{key:"".concat(t.id,"-").concat(t.connections[0].id),x0:s[t.connections[0]].x,y0:s[t.connections[0]].y,x1:s[t.id].x,y1:s[t.id].y})}))})),o.gates.map((function(a){var o=(a.x||0)+(t.selection[a.id]?r[0]:0),s=(a.y||0)+(t.selection[a.id]?r[1]:0);return i.a.createElement(tt,{gate:a,svg:e.getGateSvg(a,u),x:o,y:s,key:a.id,theme:e,selected:c[a.id],editable:n,onGateClick:l,onGateMouseDown:f,onPinMouseDown:d,onPinMouseUp:p})})))}var nt=Object(X.a)((function(t){return{selectionBox:{position:"fixed",border:"1px solid ".concat(t.palette.primary.main),background:Object(Q.fade)(t.palette.primary.main,.25),pointerEvents:"none"}}}));var at=function(t){var e=Object(a.useState)(t.selectionStart),n=Object(s.a)(e,2),o=n[0],c=n[1],r=t.selectionStart,u=t.onSelectionChanged,l=nt();return Object(a.useEffect)((function(){var t=function(t){var e=[t.clientX,t.clientY];c(e),u([Math.min(r[0],e[0]),Math.min(r[1],e[1])],[Math.max(r[0],e[0]),Math.max(r[1],e[1])])};return document.addEventListener("mousemove",t),function(){document.removeEventListener("mousemove",t)}}),[r,u]),o[0]!==t.selectionStart[0]&&o[1]!==t.selectionStart[1]&&i.a.createElement("div",{className:l.selectionBox,style:{left:Math.min(t.selectionStart[0],o[0]),top:Math.min(t.selectionStart[1],o[1]),width:Math.abs(o[0]-t.selectionStart[0]),height:Math.abs(o[1]-t.selectionStart[1])}})},it=Object(X.a)((function(t){return{page:{width:"8.5in",height:"11in",background:"white",position:"relative",margin:"auto",boxShadow:"0 0 .05in #aaa",marginBottom:"0.1in"}}}));function ot(t){var e=Object(a.useState)([t.x0,t.y0]),n=Object(s.a)(e,2),o=n[0],c=n[1],r=t.clientToPage;return Object(a.useEffect)((function(){var t=function(t){c(r([t.clientX,t.clientY]))};return document.addEventListener("mousemove",t),function(){document.removeEventListener("mousemove",t)}}),[r]),t.isOutputPin?i.a.createElement($,{x0:t.x0,y0:t.y0,x1:o[0],y1:o[1]}):i.a.createElement($,{x1:t.x0,y1:t.y0,x0:o[0],y0:o[1]})}var ct=i.a.forwardRef((function(t,e){var n=t.selection,o=t.theme,c=t.simState,l=t.editable,f=t.circuit,p=t.onCircuitChanged,d=t.onSelectionChanged,m=t.onUserInputChanged,b=it(),g=Object(a.useState)(null),v=Object(s.a)(g,2),h=v[0],O=v[1],E=Object(a.useState)({}),j=Object(s.a)(E,2),y=j[0],x=j[1],w=Object(a.useState)(!1),S=Object(s.a)(w,2),C=S[0],k=S[1],M=Object(a.useState)(!1),N=Object(s.a)(M,2),P=N[0],G=N[1],I=Object(a.useState)([0,0]),D=Object(s.a)(I,2),R=D[0],B=D[1],U=Object(a.useState)([0,0]),A=Object(s.a)(U,2),L=A[0],X=A[1],W=Object(a.useState)(null),Y=Object(s.a)(W,2),_=Y[0],H=Y[1],F=Object(a.useState)(!1),J=Object(s.a)(F,2),T=J[0],z=J[1],K=C?[(L[0]-R[0])/96,(L[1]-R[1])/96]:[0,0],$=function(t){var n=e.current.getBoundingClientRect();return[(t[0]-n.left)/96,(t[1]-n.top)/96]},q=Object(a.useCallback)((function(t,e){if(l&&0===t.button){if(!P){var a={};t.shiftKey&&Object.assign(a,n),a[e.id]=!a[e.id],d(a),t.stopPropagation()}}else null!=c&&"switch"===e.type&&m(e,!V.getUserInput(e,c))}),[n,l,P,d,m,c]),Q=Object(a.useCallback)((function(t,e){l&&0===t.button&&(B([t.clientX,t.clientY]),X([t.clientX,t.clientY]),G(!1),n[e.id]&&k(!0),t.stopPropagation()),t.preventDefault()}),[l,n,B,X,G]),Z=Object(a.useCallback)((function(t){var e=Object(u.a)({},f);e.gates=e.gates.map((function(e){return n[e.id]&&((e=Object(u.a)({},e)).x+=t[0],e.y+=t[1]),e})),p(e)}),[f,n,p]),tt=Object(a.useCallback)((function(t,e){var n=Object(u.a)({},f),a=function(n,a){if(a||0===n.connections.length){if(n.id===t)return Object(u.a)({},n,{connections:[].concat(Object(r.a)(n.connections),[e])});if(n.id===e)return Object(u.a)({},n,{connections:[].concat(Object(r.a)(n.connections),[t])})}return n},i=!1;n.gates=n.gates.map((function(t){var e=!1,n=t.inputs.map((function(t){var n=a(t);return n!==t&&(e=!0),n}));return e?(i=!0,Object(u.a)({},t,{inputs:n})):t})),i&&(n.gates=n.gates.map((function(t){var e=!1,n=t.outputs.map((function(t){var n=a(t,!0);return n!==t&&(e=!0),n}));return e?Object(u.a)({},t,{outputs:n}):t})),p(n))}),[f,p]),nt=Object(a.useCallback)((function(t,e,n){if(l&&0===t.button)if(n)H(e.id),z(n);else if(e.connections.length>0){var a=Object(u.a)({},f);a.gates=a.gates.map((function(t){var n=t.inputs.indexOf(e),a=t.outputs.findIndex((function(t){return t.id===e.connections[0]}));if(-1!==n){var i=Object(u.a)({},t,{inputs:Object(r.a)(t.inputs)});return i.inputs[n]=Object(u.a)({},e,{connections:[]}),i}if(-1!==a){var o=t.outputs[a],c=Object(u.a)({},t,{outputs:Object(r.a)(t.outputs)});return c.outputs[a]=Object(u.a)({},o,{connections:o.connections.filter((function(t){return t!==e.id}))}),c}return t})),p(a),H(e.connections[0]),z(!0)}else H(e.id),z(n);t.stopPropagation(),t.preventDefault()}),[f,l,H,z,p]),ct=Object(a.useCallback)((function(t,e,n){l&&(null!==_&&_!==e.id&&n^T&&(tt(_,e.id),t.stopPropagation(),t.preventDefault()),H(null))}),[l,_,T,tt]),rt=Object(u.a)({},t.selection,{},y),ut=Object(a.useMemo)((function(){var t={};return f.gates.forEach((function(e){var a=(e.x||0)+(n[e.id]?K[0]:0),i=(e.y||0)+(n[e.id]?K[1]:0);Object.assign(t,o.getPinPositions(e,a,i))})),t}),[n,o,K,f]);return Object(a.useEffect)((function(){var t=function(t){l?0===t.button&&(C?(Z(K),k(!1),t.stopPropagation()):h&&(x({}),d(rt)),O(null),null!==_&&H(null),t.preventDefault()):t.preventDefault()};return window.addEventListener("mouseup",t),function(){return window.removeEventListener("mouseup",t)}})),Object(a.useEffect)((function(){if(l){var t=function(t){C&&X([t.clientX,t.clientY]),P||G(!0)};return window.addEventListener("mousemove",t),function(){return window.removeEventListener("mousemove",t)}}}),[C,P,l]),i.a.createElement("div",{className:b.page,ref:e,onMouseDown:function(t){l&&0===t.button&&(O([t.clientX,t.clientY]),t.shiftKey||d({})),t.preventDefault()}},l&&null!==_&&i.a.createElement(ot,{x0:ut[_].x,y0:ut[_].y,clientToPage:$,isOutputPin:T}),i.a.createElement(et,{circuit:f,editable:l,selection:rt,theme:o,moveAmount:K,onPinMouseDown:nt,onPinMouseUp:ct,onGateClick:q,onGateMouseDown:Q,simState:c}),l&&h&&i.a.createElement(at,{selectionStart:h,onSelectionChanged:function(e,n){var a=$(e),i=$(n),o=null;f.gates.forEach((function(e){var n=t.theme.getWidth(e),c=t.theme.getHeight(e),r=e.x>=a[0]&&e.y>=a[1]&&e.x+n<=i[0]&&e.y+c<=i[1];r&&!y[e.id]?(o||(o=Object.assign({},y)),o[e.id]=!0):!r&&y[e.id]&&(o||(o=Object.assign({},y)),delete o[e.id])})),o&&x(o)}}))})),rt=n(139),ut=n(38),st=n.n(ut),lt=n(39),ft=n.n(lt),pt=n(48),dt=n.n(pt),mt=n(49),bt=n.n(mt),gt=n(40),vt=n.n(gt),ht=n(41),Ot=n.n(ht),Et=n(42),jt=n.n(Et),yt=n(50),xt=n.n(yt);function wt(t){return i.a.createElement(rt.a,{item:!0,xs:3},i.a.createElement(O.a,{title:"Add ".concat(t.text)},i.a.createElement(b.a,{onClick:t.onClick},i.a.createElement("div",{style:{position:"relative",width:"0.5in",height:"0.5in",overflow:"hidden"}},t.inverted&&i.a.createElement($,{x0:.25,y0:.25,x1:.4375,y1:.25}),t.inverted&&i.a.createElement("img",{src:xt.a,alt:"",style:{position:"absolute",left:"".concat(.375,"in"),top:"".concat(.1875,"in")}}),i.a.createElement("img",{src:t.svg,alt:"",style:{position:"absolute",left:t.inverted?"-0.0625in":0,top:0}})))))}var St=function(t){var e=function(t){return t.outputs[0].isInverted=!0,t};return i.a.createElement(rt.a,{container:!0,className:t.className},i.a.createElement(wt,{svg:st.a,text:"AND gate",onClick:function(){return t.onSelect(V.andGate)}}),i.a.createElement(wt,{svg:st.a,text:"NAND gate",onClick:function(){return t.onSelect((function(){return e(V.andGate())}))},inverted:!0}),i.a.createElement(wt,{svg:ft.a,text:"OR gate",onClick:function(){return t.onSelect(V.orGate)}}),i.a.createElement(wt,{svg:ft.a,text:"NOR gate",onClick:function(){return t.onSelect((function(){return e(V.orGate())}))},inverted:!0}),i.a.createElement(wt,{svg:bt.a,text:"ground",onClick:function(){return t.onSelect((function(){return V.constantGate(!1)}))}}),i.a.createElement(wt,{svg:dt.a,text:"+1",onClick:function(){return t.onSelect((function(){return V.constantGate(!0)}))}}),i.a.createElement(wt,{svg:Ot.a,text:"buffer",onClick:function(){return t.onSelect((function(){return V.buffer()}))}}),i.a.createElement(wt,{svg:Ot.a,text:"inverter",onClick:function(){return t.onSelect((function(){return e(V.buffer())}))},inverted:!0}),i.a.createElement(wt,{svg:vt.a,text:"LED",onClick:function(){return t.onSelect((function(){return V.led()}))}}),i.a.createElement(wt,{svg:jt.a,text:"switch",onClick:function(){return t.onSelect(V.switchGate)}}))},Ct=n(65),kt=n.n(Ct),Mt=n(66),Nt=n.n(Mt),Pt=n(67),Gt=n.n(Pt),It=n(68),Dt=n.n(It),Rt=n(69),Bt=n.n(Rt),Ut={and:function(){return st.a},or:function(){return ft.a},buffer:function(){return Ot.a},led:function(t,e){return e&&V.getInputs(t,e)[0]?Dt.a:vt.a},constant:function(t){return t.value?dt.a:bt.a},switch:function(t,e){return e&&V.getUserInput(t,e)?Bt.a:jt.a}},At={getPinSvg:function(t){return 0===t.connections.length?t.isInverted?Nt.a:kt.a:t.isInverted?xt.a:Gt.a},getGateSvg:function(t,e){return Ut[t.type](t,e)},getPinPositions:function(t,e,n,a){var i={};return t.inputs.forEach((function(a,o){i[a.id]={x:e,y:n+.25+.2*(o-(t.inputs.length-1)/2)}})),t.outputs.forEach((function(t,a){i[t.id]={x:e+.5,y:n+.25}})),i},getWidth:function(t,e){return.5},getHeight:function(t,e){return.5}},Lt=n(70),Xt=n.n(Lt),Wt=Object(X.a)((function(t){return{root:{display:"flex"},appBar:{zIndex:t.zIndex.drawer+1},menuButton:{marginRight:t.spacing(2)},menuButtonGroup:{marginRight:t.spacing(2)},hide:{display:"none"},drawer:{width:256,flexShrink:0},drawerContent:{width:256},content:{flexGrow:1,padding:t.spacing(3)},title:{flexGrow:1}}}));var Yt=function(){var t=function(t,e){var n=Object(a.useState)(t),i=Object(s.a)(n,2),o=i[0],c=i[1],u=Object(a.useState)([]),l=Object(s.a)(u,2),f=l[0],p=l[1],d=Object(a.useState)([]),m=Object(s.a)(d,2),b=m[0],g=m[1],v=f.length>0,h=b.length>0;return[o,function(t){p([o].concat(Object(r.a)(f)).splice(-(e||1e3))),c(t),g([])},function(){v&&(g([o].concat(Object(r.a)(b))),c(f[0]),p(f.slice(1)))},function(){h&&(p([o].concat(Object(r.a)(f))),c(b[0]),g(b.slice(1)))}]}((function(){return V.circuit([])})),e=Object(s.a)(t,4),n=e[0],o=e[1],c=e[2],x=e[3],S=Object(a.useState)(!1),k=Object(s.a)(S,2),N=k[0],G=k[1],D=Object(a.useState)(null),B=Object(s.a)(D,2),A=B[0],X=B[1],W=Object(a.useState)(!1),Y=Object(s.a)(W,2),_=Y[0],H=Y[1],F=Object(a.useState)(null),J=Object(s.a)(F,2),T=J[0],z=J[1],K=Object(a.useState)(null),$=Object(s.a)(K,2),q=$[0],Q=$[1],Z=Object(a.useRef)(new Xt.a),tt=Object(a.useState)(!1),et=Object(s.a)(tt,2),nt=et[0],at=et[1],it=i.a.createRef(),ot=i.a.createRef(),rt=Wt(),ut=function(){return Q(null)};return Object(a.useEffect)((function(){var t=_;return function e(n){t?(X(n),Z.current.getState().then(e)):X(null)}(null),function(){t=!1}}),[_]),i.a.createElement("div",{className:rt.root},i.a.createElement(f.a,null),i.a.createElement(h.a,{variant:"persistent",className:rt.drawer,open:!0},i.a.createElement(d.a,null),i.a.createElement(St,{className:rt.drawerContent,onSelect:function(t){var e=Object(u.a)({},n);e.gates=Object(r.a)(e.gates);var a=t();e.gates.push(a);var i=it.current.getBoundingClientRect(),c=ot.current.getBoundingClientRect();a.x=((i.width+256)/2-c.left)/96,a.y=((window.innerHeight+i.height)/2-c.top)/96,o(e)}})),i.a.createElement(p.a,{position:"fixed",className:rt.appBar,ref:it},i.a.createElement(d.a,null,i.a.createElement(O.a,{variant:"h6",className:rt.title},"MML2"),i.a.createElement(m.a,{className:rt.menuButtonGroup,color:"inherit"},i.a.createElement(g.a,{title:"Upload project"},i.a.createElement(b.a,{"aria-label":"upload",onClick:function(){return new Promise((function(t,e){var n=document.createElement("input");n.setAttribute("type","file"),n.style.display="none",document.body.appendChild(n),n.addEventListener("change",(function(){this.files[0].text().then(JSON.parse).then((function(e){return t(e)})).catch((function(t){return e(t)}))}),!1),n.click(),document.body.removeChild(n)})).then((function(t){o(V.renumber(t.circuit))})).catch((function(t){at(!0),console.error(t)}))}},i.a.createElement(L.a,null))),i.a.createElement(g.a,{title:"Download project"},i.a.createElement(b.a,{"aria-label":"download",onClick:function(){!function(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e)))),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}("circuit.json",{version:l.version,circuit:n})}},i.a.createElement(U.a,null)))),i.a.createElement(m.a,{className:rt.menuButtonGroup,color:"inherit"},i.a.createElement(g.a,{title:"Undo"},i.a.createElement(b.a,{"aria-label":"undo",onClick:c},i.a.createElement(I.a,null))),i.a.createElement(g.a,{title:"Redo"},i.a.createElement(b.a,{"aria-label":"redo",onClick:x},i.a.createElement(P.a,null)))),i.a.createElement(g.a,{title:_?"Stop simulation":"Start simulation"},i.a.createElement(b.a,{"aria-label":_?"stop":"start",onClick:function(){_?(Z.current.stopSimulation(),H(!1)):(Z.current.startSimulation(n),H(!0))},className:rt.menuButton,color:"inherit"},_?i.a.createElement(w.a,null):i.a.createElement(C.a,null))),i.a.createElement(g.a,{title:"Delete selection"},i.a.createElement(b.a,{"aria-label":"delete",onClick:function(){var t=Object(u.a)({},n);t.gates=t.gates.filter((function(t){return!N[t.id]})),t.gates=V.removeInvalidConnections(t.gates),o(t)},className:rt.menuButton,color:"inherit"},i.a.createElement(M.a,null))),i.a.createElement(g.a,{title:"Help"},i.a.createElement(b.a,{"aria-label":"help",className:rt.menuButton,color:"inherit"},i.a.createElement(R.a,null))))),i.a.createElement(d.a,null),i.a.createElement("main",{className:rt.content},i.a.createElement(d.a,null),i.a.createElement(v.a,{onContextMenu:function(t){t.preventDefault(),Q([t.clientX-2,t.clientY-4])}},i.a.createElement(ct,{circuit:n,theme:At,ref:ot,selection:N,simState:A,onSelectionChanged:function(t){G(t)},onCircuitChanged:function(t){o(t)},onUserInputChanged:function(t,e){Z.current.setUserInput(t,e)},editable:!A}))),i.a.createElement(E.a,{open:nt,autoHideDuration:1e4,onClose:function(){at(!1)},message:"Uh oh! We weren't able to load that file."}),i.a.createElement(j.a,{keepMounted:!0,open:null!==q,onClose:ut,anchorReference:"anchorPosition",anchorPosition:q&&{left:q[0],top:q[1]}},i.a.createElement(y.a,{onClick:function(){z(V.removeInvalidConnections(n.gates.filter((function(t){return N[t.id]})))),ut()}},"Copy"),i.a.createElement(y.a,{onClick:function(){var t=V.renumber(n);t.gates=t.gates.concat(T),o(t),ut()}},"Paste"),i.a.createElement(y.a,{onClick:function(){G(Object.fromEntries(n.gates.map((function(t){return[t.id,!0]})))),ut()}},"Select all")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),i.a.createElement(Yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[85,1,2]]]);
//# sourceMappingURL=main.20900b60.chunk.js.map